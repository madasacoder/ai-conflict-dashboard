============================= test session starts ==============================
platform darwin -- Python 3.13.5, pytest-8.4.0, pluggy-1.6.0 -- /Users/ahmed/src/ai-conflict-dashboard/venv/bin/python
cachedir: .pytest_cache
rootdir: /Users/ahmed/src/ai-conflict-dashboard/backend
configfile: pytest.ini
plugins: cov-6.0.0, asyncio-0.25.2, anyio-4.9.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None
collecting ... collected 156 items

test_ollama_integration.py::test_call_ollama_fixed PASSED                [  0%]
test_ollama_integration.py::test_analyze_with_models_including_ollama PASSED [  1%]
tests/test_adversarial.py::TestAdversarialInputs::test_extremely_long_single_word PASSED [  1%]
tests/test_adversarial.py::TestAdversarialInputs::test_malicious_json_injection PASSED [  2%]
tests/test_adversarial.py::TestAdversarialInputs::test_unicode_direction_override PASSED [  3%]
tests/test_adversarial.py::TestAdversarialInputs::test_null_bytes_in_input PASSED [  3%]
tests/test_adversarial.py::TestAdversarialInputs::test_deeply_nested_markdown PASSED [  4%]
tests/test_adversarial.py::TestRaceConditions::test_same_request_multiple_times PASSED [  5%]
tests/test_adversarial.py::TestRaceConditions::test_rapidly_changing_api_keys FAILED [  5%]
tests/test_adversarial.py::TestResourceExhaustion::test_memory_exhaustion_via_large_response PASSED [  6%]
tests/test_adversarial.py::TestResourceExhaustion::test_infinite_recursion_in_text FAILED [  7%]
tests/test_adversarial.py::TestStateCorruption::test_request_data_leakage_between_users PASSED [  7%]
tests/test_adversarial.py::TestStateCorruption::test_circuit_breaker_state_pollution PASSED [  8%]
tests/test_adversarial.py::TestChunkingEdgeCases::test_chunk_boundary_code_blocks FAILED [  8%]
tests/test_adversarial.py::TestChunkingEdgeCases::test_chunk_with_no_good_split_points FAILED [  9%]
tests/test_adversarial.py::TestTimingAttacks::test_api_key_timing_attack PASSED [ 10%]
tests/test_adversarial.py::TestFrontendAssumptions::test_response_without_expected_fields PASSED [ 10%]
tests/test_adversarial.py::TestFrontendAssumptions::test_non_ascii_in_response_headers PASSED [ 11%]
tests/test_adversarial.py::TestSecurityAssumptions::test_path_traversal_in_model_names FAILED [ 12%]
tests/test_adversarial.py::TestSecurityAssumptions::test_xxe_in_xml_like_content PASSED [ 12%]
tests/test_adversarial.py::TestBrowserQuirks::test_different_newline_formats FAILED [ 13%]
tests/test_adversarial.py::TestBrowserQuirks::test_emoji_skin_tone_modifiers FAILED [ 14%]
tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_missing_keys FAILED [ 14%]
tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_missing_text FAILED [ 15%]
tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_short_text_openai FAILED [ 16%]
tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_short_text_claude FAILED [ 16%]
tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_both_providers FAILED [ 17%]
tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_long_text_triggers_chunking FAILED [ 17%]
tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_provider_error_handling FAILED [ 18%]
tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_unicode_text FAILED [ 19%]
tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_empty_text FAILED [ 19%]
tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_whitespace_only_text FAILED [ 20%]
tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_various_text_sizes[100] FAILED [ 21%]
tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_various_text_sizes[1000] FAILED [ 21%]
tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_various_text_sizes[2500] FAILED [ 22%]
tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_various_text_sizes[5000] FAILED [ 23%]
tests/test_api_analyze.py::TestAnalyzeEndpoint::test_response_includes_token_info FAILED [ 23%]
tests/test_api_integration.py::TestAPIIntegrationScenarios::test_multiple_file_content_analysis FAILED [ 24%]
tests/test_api_integration.py::TestAPIIntegrationScenarios::test_unicode_and_special_characters FAILED [ 25%]
tests/test_api_integration.py::TestAPIIntegrationScenarios::test_concurrent_requests FAILED [ 25%]
tests/test_api_integration.py::TestAPIIntegrationScenarios::test_request_id_uniqueness FAILED [ 26%]
tests/test_api_integration.py::TestAPIIntegrationScenarios::test_model_fallback_behavior FAILED [ 26%]
tests/test_api_integration.py::TestAPIIntegrationScenarios::test_mixed_provider_response_times FAILED [ 27%]
tests/test_api_integration.py::TestAPIIntegrationScenarios::test_empty_provider_response_handling FAILED [ 28%]
tests/test_api_integration.py::TestAPIIntegrationScenarios::test_cors_headers FAILED [ 28%]
tests/test_api_integration.py::TestAPIErrorScenarios::test_malformed_json FAILED [ 29%]
tests/test_api_integration.py::TestAPIErrorScenarios::test_missing_content_type FAILED [ 30%]
tests/test_api_integration.py::TestAPIErrorScenarios::test_very_large_payload FAILED [ 30%]
tests/test_api_integration.py::TestAPIErrorScenarios::test_rate_limiting_simulation FAILED [ 31%]
tests/test_api_integration.py::TestAPIErrorScenarios::test_timeout_handling FAILED [ 32%]
tests/test_integration.py::TestFullWorkflowIntegration::test_full_analysis_workflow_all_providers FAILED [ 32%]
tests/test_integration.py::TestFullWorkflowIntegration::test_partial_provider_workflow FAILED [ 33%]
tests/test_integration.py::TestFullWorkflowIntegration::test_error_handling_workflow FAILED [ 33%]
tests/test_integration.py::TestFullWorkflowIntegration::test_large_text_chunking_workflow FAILED [ 34%]
tests/test_integration.py::TestFullWorkflowIntegration::test_concurrent_provider_calls PASSED [ 35%]
tests/test_integration.py::TestFullWorkflowIntegration::test_model_selection_persistence FAILED [ 35%]
tests/test_integration.py::TestCircuitBreakerIntegration::test_circuit_breaker_opens_after_failures FAILED [ 36%]
tests/test_integration.py::TestCircuitBreakerIntegration::test_circuit_breaker_recovery FAILED [ 37%]
tests/test_integration.py::TestLoggingIntegration::test_request_correlation_id FAILED [ 37%]
tests/test_integration.py::TestLoggingIntegration::test_error_logging_integration FAILED [ 38%]
tests/test_integration.py::TestHealthCheckIntegration::test_health_check_when_healthy PASSED [ 39%]
tests/test_integration.py::TestHealthCheckIntegration::test_health_check_with_degraded_service FAILED [ 39%]
tests/test_llm_providers.py::TestCircuitBreakerCallbacks::test_on_circuit_open FAILED [ 40%]
tests/test_llm_providers.py::TestCircuitBreakerCallbacks::test_on_circuit_close FAILED [ 41%]
tests/test_llm_providers.py::TestOpenAIIntegration::test_call_openai_no_key PASSED [ 41%]
tests/test_llm_providers.py::TestOpenAIIntegration::test_call_openai_success FAILED [ 42%]
tests/test_llm_providers.py::TestOpenAIIntegration::test_call_openai_api_error FAILED [ 42%]
tests/test_llm_providers.py::TestOpenAIIntegration::test_call_openai_timeout FAILED [ 43%]
tests/test_llm_providers.py::TestOpenAIIntegration::test_call_openai_circuit_open FAILED [ 44%]
tests/test_llm_providers.py::TestClaudeIntegration::test_call_claude_no_key PASSED [ 44%]
tests/test_llm_providers.py::TestClaudeIntegration::test_call_claude_success PASSED [ 45%]
tests/test_llm_providers.py::TestClaudeIntegration::test_call_claude_api_error PASSED [ 46%]
tests/test_llm_providers.py::TestClaudeIntegration::test_call_claude_timeout PASSED [ 46%]
tests/test_llm_providers.py::TestClaudeIntegration::test_call_claude_circuit_open FAILED [ 47%]
tests/test_llm_providers.py::TestGeminiIntegration::test_call_gemini_no_key PASSED [ 48%]
tests/test_llm_providers.py::TestGeminiIntegration::test_call_gemini_success PASSED [ 48%]
tests/test_llm_providers.py::TestGeminiIntegration::test_call_gemini_api_error PASSED [ 49%]
tests/test_llm_providers.py::TestGeminiIntegration::test_call_gemini_timeout PASSED [ 50%]
tests/test_llm_providers.py::TestGeminiIntegration::test_call_gemini_circuit_open FAILED [ 50%]
tests/test_llm_providers.py::TestGrokIntegration::test_call_grok_no_key PASSED [ 51%]
tests/test_llm_providers.py::TestGrokIntegration::test_call_grok_success PASSED [ 51%]
tests/test_llm_providers.py::TestGrokIntegration::test_call_grok_api_error PASSED [ 52%]
tests/test_llm_providers.py::TestGrokIntegration::test_call_grok_timeout PASSED [ 53%]
tests/test_llm_providers.py::TestGrokIntegration::test_call_grok_circuit_open FAILED [ 53%]
tests/test_llm_providers.py::TestAnalyzeWithModels::test_analyze_with_both_models PASSED [ 54%]
tests/test_llm_providers.py::TestAnalyzeWithModels::test_analyze_with_openai_only PASSED [ 55%]
tests/test_llm_providers.py::TestAnalyzeWithModels::test_analyze_with_claude_only PASSED [ 55%]
tests/test_llm_providers.py::TestAnalyzeWithModels::test_analyze_with_custom_models FAILED [ 56%]
tests/test_llm_providers.py::TestAnalyzeWithModels::test_analyze_with_all_four_models PASSED [ 57%]
tests/test_llm_providers.py::TestAnalyzeWithModels::test_analyze_with_gemini_only PASSED [ 57%]
tests/test_llm_providers.py::TestAnalyzeWithModels::test_analyze_with_grok_only PASSED [ 58%]
tests/test_main.py::TestMainApp::test_root_endpoint FAILED               [ 58%]
tests/test_main.py::TestMainApp::test_health_endpoint PASSED             [ 59%]
tests/test_main.py::TestMainApp::test_analyze_with_debug_mode FAILED     [ 60%]
tests/test_main.py::TestMainApp::test_analyze_with_production_mode FAILED [ 60%]
tests/test_real_bugs.py::TestActualBugs::test_chunk_text_with_code_block_boundary FAILED [ 61%]
tests/test_real_bugs.py::TestActualBugs::test_token_counting_with_emojis PASSED [ 62%]
tests/test_real_bugs.py::TestActualBugs::test_file_upload_with_same_filename PASSED [ 62%]
tests/test_real_bugs.py::TestActualBugs::test_api_key_in_url_logging PASSED [ 63%]
tests/test_real_bugs.py::TestActualBugs::test_circuit_breaker_global_state PASSED [ 64%]
tests/test_real_bugs.py::TestActualBugs::test_race_condition_in_request_id PASSED [ 64%]
tests/test_real_bugs.py::TestActualBugs::test_memory_leak_with_large_responses PASSED [ 65%]
tests/test_real_bugs.py::TestActualBugs::test_frontend_xss_with_markdown PASSED [ 66%]
tests/test_real_bugs.py::TestActualBugs::test_dos_via_regex_in_highlighting PASSED [ 66%]
tests/test_real_bugs.py::TestActualBugs::test_localstorage_pollution PASSED [ 67%]
tests/test_real_bugs.py::TestActualBugs::test_cors_misconfiguration PASSED [ 67%]
tests/test_real_bugs.py::TestActualBugs::test_no_rate_limiting PASSED    [ 68%]
tests/test_real_bugs.py::TestActualBugs::test_error_messages_leak_info PASSED [ 69%]
tests/test_real_bugs.py::TestActualBugs::test_timing_attack_on_api_validation PASSED [ 69%]
tests/test_real_bugs.py::TestActualBugs::test_unicode_normalization_issues PASSED [ 70%]
tests/test_security_comprehensive.py::TestSecurityVulnerabilities::test_sql_injection_in_text FAILED [ 71%]
tests/test_security_comprehensive.py::TestSecurityVulnerabilities::test_xxe_xml_injection FAILED [ 71%]
tests/test_security_comprehensive.py::TestSecurityVulnerabilities::test_command_injection FAILED [ 72%]
tests/test_security_comprehensive.py::TestSecurityVulnerabilities::test_path_traversal FAILED [ 73%]
tests/test_security_comprehensive.py::TestSecurityVulnerabilities::test_api_key_extraction_attempts FAILED [ 73%]
tests/test_security_comprehensive.py::TestRateLimitingComprehensive::test_rate_limiter_accuracy PASSED [ 74%]
tests/test_security_comprehensive.py::TestRateLimitingComprehensive::test_rate_limiter_different_users PASSED [ 75%]
tests/test_security_comprehensive.py::TestRateLimitingComprehensive::test_rate_limiter_time_windows PASSED [ 75%]
tests/test_security_comprehensive.py::TestRateLimitingComprehensive::test_identifier_extraction PASSED [ 76%]
tests/test_security_comprehensive.py::TestCircuitBreakerPerKey::test_circuit_breakers_are_per_key PASSED [ 76%]
tests/test_security_comprehensive.py::TestCircuitBreakerPerKey::test_circuit_breaker_cleanup_old_keys PASSED [ 77%]
tests/test_security_comprehensive.py::TestSmartChunking::test_code_blocks_not_split PASSED [ 78%]
tests/test_security_comprehensive.py::TestSmartChunking::test_nested_code_blocks PASSED [ 78%]
tests/test_security_comprehensive.py::TestSmartChunking::test_overlap_functionality PASSED [ 79%]
tests/test_security_comprehensive.py::TestCORSConfiguration::test_production_cors_restrictions PASSED [ 80%]
tests/test_security_comprehensive.py::TestCORSConfiguration::test_development_cors_allows_localhost PASSED [ 80%]
tests/test_security_comprehensive.py::TestCORSConfiguration::test_custom_allowed_origins PASSED [ 81%]
tests/test_security_comprehensive.py::TestMemoryAndPerformance::test_large_response_memory_cleanup FAILED [ 82%]
tests/test_security_comprehensive.py::TestMemoryAndPerformance::test_regex_dos_prevention FAILED [ 82%]
tests/test_security_comprehensive.py::TestDataValidation::test_model_name_validation FAILED [ 83%]
tests/test_security_comprehensive.py::TestDataValidation::test_api_key_format_validation FAILED [ 83%]
tests/test_security_comprehensive.py::TestDataValidation::test_text_size_limits FAILED [ 84%]
tests/test_structured_logging.py::TestStructuredLogging::test_add_timestamp PASSED [ 85%]
tests/test_structured_logging.py::TestStructuredLogging::test_setup_structured_logging PASSED [ 85%]
tests/test_structured_logging.py::TestStructuredLogging::test_get_logger_with_context PASSED [ 86%]
tests/test_structured_logging.py::TestStructuredLogging::test_request_context PASSED [ 87%]
tests/test_structured_logging.py::TestStructuredLogging::test_log_api_request PASSED [ 87%]
tests/test_structured_logging.py::TestStructuredLogging::test_log_api_response PASSED [ 88%]
tests/test_structured_logging.py::TestStructuredLogging::test_log_llm_call_success PASSED [ 89%]
tests/test_structured_logging.py::TestStructuredLogging::test_log_llm_call_failure PASSED [ 89%]
tests/test_structured_logging.py::TestStructuredLogging::test_log_circuit_breaker_event PASSED [ 90%]
tests/test_token_utils.py::TestEstimateTokens::test_empty_string PASSED  [ 91%]
tests/test_token_utils.py::TestEstimateTokens::test_short_text PASSED    [ 91%]
tests/test_token_utils.py::TestEstimateTokens::test_longer_text PASSED   [ 92%]
tests/test_token_utils.py::TestEstimateTokens::test_special_characters PASSED [ 92%]
tests/test_token_utils.py::TestCheckTokenLimits::test_within_limits PASSED [ 93%]
tests/test_token_utils.py::TestCheckTokenLimits::test_exceeds_gpt35_limit PASSED [ 94%]
tests/test_token_utils.py::TestCheckTokenLimits::test_recommendations PASSED [ 94%]
tests/test_token_utils.py::TestChunkText::test_no_chunking_needed PASSED [ 95%]
tests/test_token_utils.py::TestChunkText::test_basic_chunking PASSED     [ 96%]
tests/test_token_utils.py::TestChunkText::test_chunk_overlap PASSED      [ 96%]
tests/test_token_utils.py::TestChunkText::test_chunk_metadata PASSED     [ 97%]
tests/test_token_utils.py::TestChunkText::test_sentence_boundary_preservation PASSED [ 98%]
tests/test_token_utils.py::TestEdgeCases::test_very_long_single_word FAILED [ 98%]
tests/test_token_utils.py::TestEdgeCases::test_unicode_text PASSED       [ 99%]
tests/test_token_utils.py::TestEdgeCases::test_empty_paragraphs PASSED   [100%]

=================================== FAILURES ===================================
______________ TestRaceConditions.test_rapidly_changing_api_keys _______________
tests/test_adversarial.py:125: in test_rapidly_changing_api_keys
    assert all(r.status_code == 200 for r in responses)
E   assert False
E    +  where False = all(<generator object TestRaceConditions.test_rapidly_changing_api_keys.<locals>.<genexpr> at 0x1179d17d0>)
---------------------------- Captured stdout setup -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:43.218031+00:00[0m [[32m[1minfo     [0m] [1mStarting AI Conflict Dashboard API[0m [[0m[1m[34mmain[0m][0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35mlifespan[0m [36mlineno[0m=[35m41[0m
[2m2025-08-02T17:00:43.218157+00:00[0m [[32m[1minfo     [0m] [1mMemory manager started        [0m [[0m[1m[34mmemory_management[0m][0m [36mfilename[0m=[35mmemory_management.py[0m [36mfunc_name[0m=[35mstart[0m [36mlineno[0m=[35m44[0m
------------------------------ Captured log setup ------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
INFO     main:main.py:41 {'event': 'Starting AI Conflict Dashboard API', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:43.218031+00:00', 'filename': 'main.py', 'func_name': 'lifespan', 'lineno': 41}
INFO     memory_management:memory_management.py:44 {'event': 'Memory manager started', 'level': 'info', 'logger': 'memory_management', 'timestamp': '2025-08-02T17:00:43.218157+00:00', 'filename': 'memory_management.py', 'func_name': 'start', 'lineno': 44}
----------------------------- Captured stdout call -----------------------------
[2m2025-08-02T17:00:43.218901+00:00[0m [[32m[1minfo     [0m] [1mapi_request                   [0m [[0m[1m[34mmain[0m][0m [36mclient[0m=[35mtestclient[0m [36mfilename[0m=[35mstructured_logging.py[0m [36mfunc_name[0m=[35mlog_api_request[0m [36mlineno[0m=[35m218[0m [36mmethod[0m=[35mPOST[0m [36mpath[0m=[35m/api/analyze[0m [36mquery_params[0m=[35m{}[0m
[2m2025-08-02T17:00:43.219381+00:00[0m [[32m[1minfo     [0m] [1mToken check                   [0m [[0m[1m[34mmain[0m][0m [36mextra[0m=[35m{'estimated_tokens': 2, 'safe_for_all': True, 'warnings_count': 0}[0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35manalyze_text[0m [36mlineno[0m=[35m291[0m
[2m2025-08-02T17:00:43.219514+00:00[0m [[32m[1minfo     [0m] [1mProcessing analyze request b1c973e9-52a4-4bdb-a656-1ae3dd7802bc[0m [[0m[1m[34mmain[0m][0m [36mextra[0m=[35m{'request_id': 'b1c973e9-52a4-4bdb-a656-1ae3dd7802bc', 'text_length': 9, 'has_openai_key': True, 'has_claude_key': False, 'has_gemini_key': False, 'has_grok_key': False}[0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35manalyze_text[0m [36mlineno[0m=[35m330[0m
[2m2025-08-02T17:00:43.219659+00:00[0m [[32m[1mdebug    [0m] [1mRequest started               [0m [[0m[1m[34mmemory_management[0m][0m [36mactive_requests[0m=[35m1[0m [36mfilename[0m=[35mmemory_management.py[0m [36mfunc_name[0m=[35m__enter__[0m [36mlineno[0m=[35m140[0m [36mrequest_id[0m=[35mb1c973e9-52a4-4bdb-a656-1ae3dd7802bc[0m
[2m2025-08-02T17:00:43.219820+00:00[0m [[32m[1minfo     [0m] [1mCreated new circuit breaker for openai[0m [[0m[1m[34mllm_providers[0m][0m [36mfilename[0m=[35mllm_providers.py[0m [36mfunc_name[0m=[35mget_circuit_breaker[0m [36mkey_prefix[0m=[35mkey-0[0m [36mlineno[0m=[35m59[0m [36mprovider[0m=[35mopenai[0m
[1mRequest options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-f4d98f7c-10f7-4783-bbb7-0a67e130b3e7', 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant. Analyze the provided text and provide insights.'}, {'role': 'user', 'content': 'Request 0'}], 'model': 'gpt-4', 'max_tokens': 1000, 'temperature': 0.7}}[0m
[1mSending HTTP Request: POST https://api.openai.com/v1/chat/completions[0m
[1mconnect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None[0m
[1mconnect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1179218b0>[0m
[1mstart_tls.started ssl_context=<ssl.SSLContext object at 0x11792e9f0> server_hostname='api.openai.com' timeout=5.0[0m
[1mstart_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1179217c0>[0m
[1msend_request_headers.started request=<Request [b'POST']>[0m
[1msend_request_headers.complete [0m
[1msend_request_body.started request=<Request [b'POST']>[0m
[1msend_request_body.complete    [0m
[1mreceive_response_headers.started request=<Request [b'POST']>[0m
[1mreceive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Sat, 02 Aug 2025 17:00:43 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'255'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_2bab7e633949380a5d6299f100989459'), (b'x-envoy-upstream-service-time', b'28'), (b'x-envoy-decorator-operation', b'router.openai.svc.cluster.local:5004/*'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=cTuaC0PRJSylFhOq1lX_2gqJ32YwGGU6xkTFgf0BgSU-1754154043-1.0.1.1-8Kk7y6vjsCyh6aKBfwxS6bu9lmFeCRcyWV_MpKvAcV4KUq2ehco55XdrG2mIx3Gtdhha5k_UfCwYOE8DUNOHmpO23F2z8ZfPhXLFrT_CIpA; path=/; expires=Sat, 02-Aug-25 17:30:43 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=rtJT7jRl4ccecTQfQOiulabPK.X6keIP1USXnCYLVls-1754154043572-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'968f22133ae81284-IAH'), (b'alt-svc', b'h3=":443"; ma=86400')])[0m
[1mreceive_response_body.started request=<Request [b'POST']>[0m
[1mreceive_response_body.complete[0m
[1mresponse_closed.started       [0m
[1mresponse_closed.complete      [0m
[1mHTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers([('date', 'Sat, 02 Aug 2025 17:00:43 GMT'), ('content-type', 'application/json; charset=utf-8'), ('content-length', '255'), ('connection', 'keep-alive'), ('vary', 'Origin'), ('x-request-id', 'req_2bab7e633949380a5d6299f100989459'), ('x-envoy-upstream-service-time', '28'), ('x-envoy-decorator-operation', 'router.openai.svc.cluster.local:5004/*'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=cTuaC0PRJSylFhOq1lX_2gqJ32YwGGU6xkTFgf0BgSU-1754154043-1.0.1.1-8Kk7y6vjsCyh6aKBfwxS6bu9lmFeCRcyWV_MpKvAcV4KUq2ehco55XdrG2mIx3Gtdhha5k_UfCwYOE8DUNOHmpO23F2z8ZfPhXLFrT_CIpA; path=/; expires=Sat, 02-Aug-25 17:30:43 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=rtJT7jRl4ccecTQfQOiulabPK.X6keIP1USXnCYLVls-1754154043572-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '968f22133ae81284-IAH'), ('alt-svc', 'h3=":443"; ma=86400')])[0m
[1mrequest_id: req_2bab7e633949380a5d6299f100989459[0m
[1mEncountered httpx.HTTPStatusError[0m
[31m╭─[0m[31m──────────────────────────────[0m[31m [0m[1;31mTraceback [0m[1;2;31m(most recent call last)[0m[31m [0m[31m───────────────────────────────[0m[31m─╮[0m
[31m│[0m [2m/Users/ahmed/src/ai-conflict-dashboard/venv/lib/python3.13/site-packages/openai/[0m[1m_base_client.py[0m: [31m│[0m
[31m│[0m 1024 in request                                                                                  [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m   [2m1021 [0m[2m│   │   │   [0mlog.debug([33m"[0m[33mrequest_id: [0m[33m%s[0m[33m"[0m, response.headers.get([33m"[0m[33mx-request-id[0m[33m"[0m))             [31m│[0m
[31m│[0m   [2m1022 [0m[2m│   │   │   [0m                                                                              [31m│[0m
[31m│[0m   [2m1023 [0m[2m│   │   │   [0m[94mtry[0m:                                                                          [31m│[0m
[31m│[0m [31m❱ [0m1024 [2m│   │   │   │   [0mresponse.raise_for_status()                                               [31m│[0m
[31m│[0m   [2m1025 [0m[2m│   │   │   [0m[94mexcept[0m httpx.HTTPStatusError [94mas[0m err:  [2m# thrown on 4xx and 5xx status code[0m     [31m│[0m
[31m│[0m   [2m1026 [0m[2m│   │   │   │   [0m[1;4mlog.debug([0m[1;4;33m"[0m[1;4;33mEncountered httpx.HTTPStatusError[0m[1;4;33m"[0m[1;4m, exc_info=[0m[1;4;94mTrue[0m[1;4m)[0m             [31m│[0m
[31m│[0m   [2m1027 [0m                                                                                          [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m [34m╭─[0m[34m──────────────────────────────────────────[0m[34m locals [0m[34m──────────────────────────────────────────[0m[34m─╮[0m [31m│[0m
[31m│[0m [34m│[0m               [3;33merr[0m[31m =[0m [1;35mHTTPStatusError[0m[1m([0m[32m"Client error '401 Unauthorized' for url [0m                [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [32m'https://api.openai.com/v1/chat/completions'\nFor more information [0m      [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [32mcheck: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401"[0m[1m)[0m    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m     [3;33minput_options[0m[31m =[0m [1;35mFinalRequestOptions[0m[1m([0m                                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mmethod[0m=[32m'post'[0m,                                                       [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33murl[0m=[32m'/chat/completions'[0m,                                             [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mparams[0m=[1m{[0m[1m}[0m,                                                           [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mheaders[0m=[35mNOT_GIVEN[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mmax_retries[0m=[35mNOT_GIVEN[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mtimeout[0m=[35mNOT_GIVEN[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mfiles[0m=[3;35mNone[0m,                                                          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m                                                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [33midempotency_key[0m=[32m'stainless-python-retry-f4d98f7c-10f7-4783-bbb7-0a67e13…[0m [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mpost_parser[0m=[35mNOT_GIVEN[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mfollow_redirects[0m=[3;35mNone[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mjson_data[0m=[1m{[0m                                                          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'messages'[0m: [1m[[0m                                                    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m{[0m                                                            [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   │   [0m[32m'role'[0m: [32m'system'[0m,                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   │   [0m[32m'content'[0m: [32m'You are a helpful assistant. Analyze the [0m    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [32mprovided text and provide insights.'[0m                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m}[0m,                                                           [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m{[0m[32m'role'[0m: [32m'user'[0m, [32m'content'[0m: [32m'Request 0'[0m[1m}[0m                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[1m][0m,                                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'model'[0m: [32m'gpt-4'[0m,                                                [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'max_tokens'[0m: [1;36m1000[0m,                                              [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'temperature'[0m: [1;36m0.7[0m                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[1m}[0m,                                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mextra_json[0m=[3;35mNone[0m                                                      [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [1m)[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m            [3;33mkwargs[0m[31m =[0m [1m{[0m[1m}[0m                                                                       [34m│[0m [31m│[0m
[31m│[0m [34m│[0m       [3;33mmax_retries[0m[31m =[0m [1;36m2[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m           [3;33moptions[0m[31m =[0m [1;35mFinalRequestOptions[0m[1m([0m                                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mmethod[0m=[32m'post'[0m,                                                       [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33murl[0m=[32m'/chat/completions'[0m,                                             [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mparams[0m=[1m{[0m[1m}[0m,                                                           [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mheaders[0m=[35mNOT_GIVEN[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mmax_retries[0m=[35mNOT_GIVEN[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mtimeout[0m=[35mNOT_GIVEN[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mfiles[0m=[3;35mNone[0m,                                                          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m                                                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [33midempotency_key[0m=[32m'stainless-python-retry-f4d98f7c-10f7-4783-bbb7-0a67e13…[0m [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mpost_parser[0m=[35mNOT_GIVEN[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mfollow_redirects[0m=[3;35mNone[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mjson_data[0m=[1m{[0m                                                          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'messages'[0m: [1m[[0m                                                    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m{[0m                                                            [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   │   [0m[32m'role'[0m: [32m'system'[0m,                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   │   [0m[32m'content'[0m: [32m'You are a helpful assistant. Analyze the [0m    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [32mprovided text and provide insights.'[0m                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m}[0m,                                                           [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m{[0m[32m'role'[0m: [32m'user'[0m, [32m'content'[0m: [32m'Request 0'[0m[1m}[0m                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[1m][0m,                                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'model'[0m: [32m'gpt-4'[0m,                                                [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'max_tokens'[0m: [1;36m1000[0m,                                              [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'temperature'[0m: [1;36m0.7[0m                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[1m}[0m,                                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mextra_json[0m=[3;35mNone[0m                                                      [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [1m)[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m [3;33mremaining_retries[0m[31m =[0m [1;36m2[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m           [3;33mrequest[0m[31m =[0m [1m<[0m[1;35mRequest[0m[1;39m([0m[32m'POST'[0m[39m, [0m[32m'https://api.openai.com/v1/chat/completions'[0m[1;39m)[0m[1m>[0m          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m          [3;33mresponse[0m[31m =[0m [1m<[0m[1;95mResponse[0m[39m [0m[1;39m[[0m[1;36m401[0m[39m Unauthorized[0m[1;39m][0m[1m>[0m                                            [34m│[0m [31m│[0m
[31m│[0m [34m│[0m     [3;33mretries_taken[0m[31m =[0m [1;36m0[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m              [3;33mself[0m[31m =[0m [1m<[0m[1;95mopenai.OpenAI[0m[39m object at [0m[1;36m0x117889a30[0m[1m>[0m                                    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m            [3;33mstream[0m[31m =[0m [3;91mFalse[0m                                                                    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m        [3;33mstream_cls[0m[31m =[0m openai.Stream[1m[[0mopenai.types.chat.chat_completion_chunk.ChatCompletionChu… [34m│[0m [31m│[0m
[31m│[0m [34m╰──────────────────────────────────────────────────────────────────────────────────────────────╯[0m [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m [2m/Users/ahmed/src/ai-conflict-dashboard/venv/lib/python3.13/site-packages/httpx/[0m[1m_models.py[0m:829 in [31m│[0m
[31m│[0m raise_for_status                                                                                 [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m   [2m 826 [0m[2m│   │   [0m}                                                                                 [31m│[0m
[31m│[0m   [2m 827 [0m[2m│   │   [0merror_type = error_types.get(status_class, [33m"[0m[33mInvalid status code[0m[33m"[0m)                 [31m│[0m
[31m│[0m   [2m 828 [0m[2m│   │   [0mmessage = message.format([96mself[0m, error_type=error_type)                             [31m│[0m
[31m│[0m [31m❱ [0m 829 [2m│   │   [0m[1;4;94mraise[0m[1;4m HTTPStatusError(message, request=request, response=[0m[1;4;96mself[0m[1;4m)[0m                    [31m│[0m
[31m│[0m   [2m 830 [0m[2m│   [0m                                                                                      [31m│[0m
[31m│[0m   [2m 831 [0m[2m│   [0m[94mdef[0m[90m [0m[92mjson[0m([96mself[0m, **kwargs: typing.Any) -> typing.Any:                                   [31m│[0m
[31m│[0m   [2m 832 [0m[2m│   │   [0m[94mreturn[0m jsonlib.loads([96mself[0m.content, **kwargs)                                      [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m [34m╭─[0m[34m──────────────────────────────────────────[0m[34m locals [0m[34m──────────────────────────────────────────[0m[34m─╮[0m [31m│[0m
[31m│[0m [34m│[0m   [3;33merror_type[0m[31m =[0m [32m'Client error'[0m                                                                [34m│[0m [31m│[0m
[31m│[0m [34m│[0m  [3;33merror_types[0m[31m =[0m [1m{[0m                                                                             [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [2;32m│   [0m[1;36m1[0m: [32m'Informational response'[0m,                                              [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [2;32m│   [0m[1;36m3[0m: [32m'Redirect response'[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [2;32m│   [0m[1;36m4[0m: [32m'Client error'[0m,                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [2;32m│   [0m[1;36m5[0m: [32m'Server error'[0m                                                         [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [1m}[0m                                                                             [34m│[0m [31m│[0m
[31m│[0m [34m│[0m      [3;33mmessage[0m[31m =[0m [32m"Client error '401 Unauthorized' for url [0m                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [32m'https://api.openai.com/v1/chat/completi"[0m+[1;36m93[0m                                  [34m│[0m [31m│[0m
[31m│[0m [34m│[0m      [3;33mrequest[0m[31m =[0m [1m<[0m[1;35mRequest[0m[1;39m([0m[32m'POST'[0m[39m, [0m[32m'https://api.openai.com/v1/chat/completions'[0m[1;39m)[0m[1m>[0m               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m         [3;33mself[0m[31m =[0m [1m<[0m[1;95mResponse[0m[39m [0m[1;39m[[0m[1;36m401[0m[39m Unauthorized[0m[1;39m][0m[1m>[0m                                                 [34m│[0m [31m│[0m
[31m│[0m [34m│[0m [3;33mstatus_class[0m[31m =[0m [1;36m4[0m                                                                             [34m│[0m [31m│[0m
[31m│[0m [34m╰──────────────────────────────────────────────────────────────────────────────────────────────╯[0m [31m│[0m
[31m╰──────────────────────────────────────────────────────────────────────────────────────────────────╯[0m
[1;91mHTTPStatusError: [0mClient error [32m'401 Unauthorized'[0m for url 
[32m'https://api.openai.com/v1/chat/completions'[0m
For more information check: [4;94mhttps://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401[0m

[1mNot retrying                  [0m
[1mRe-raising status error       [0m
[2m2025-08-02T17:00:43.644234+00:00[0m [[31m[1merror    [0m] [1mOpenAI call failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: key-0. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}[0m [[0m[1m[34mllm_providers[0m][0m [36merror[0m=[35mError code: 401 - {'error': {'message': 'Incorrect API key provided: key-0. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}[0m [36mfilename[0m=[35mllm_providers.py[0m [36mfunc_name[0m=[35mcall_openai[0m [36mlineno[0m=[35m136[0m
[2m2025-08-02T17:00:43.644491+00:00[0m [[32m[1mdebug    [0m] [1mModel response received       [0m [[0m[1m[34mmain[0m][0m [36mextra[0m=[35m{'request_id': 'b1c973e9-52a4-4bdb-a656-1ae3dd7802bc', 'model': 'openai', 'has_error': True, 'response_length': 0}[0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35manalyze_text[0m [36mlineno[0m=[35m365[0m
[2m2025-08-02T17:00:43.644673+00:00[0m [[32m[1minfo     [0m] [1mAnalysis completed successfully[0m [[0m[1m[34mmain[0m][0m [36mextra[0m=[35m{'request_id': 'b1c973e9-52a4-4bdb-a656-1ae3dd7802bc', 'successful_models': 0}[0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35manalyze_text[0m [36mlineno[0m=[35m390[0m
[2m2025-08-02T17:00:43.644849+00:00[0m [[32m[1mdebug    [0m] [1mRequest completed             [0m [[0m[1m[34mmemory_management[0m][0m [36mduration_seconds[0m=[35m0.43[0m [36mfilename[0m=[35mmemory_management.py[0m [36mfunc_name[0m=[35m__exit__[0m [36mhad_error[0m=[35mFalse[0m [36mlineno[0m=[35m156[0m [36mrequest_id[0m=[35mb1c973e9-52a4-4bdb-a656-1ae3dd7802bc[0m
[2m2025-08-02T17:00:43.644990+00:00[0m [[32m[1mdebug    [0m] [1mOperation completed within timeout[0m [[0m[1m[34mtimeout_handler[0m][0m [36melapsed[0m=[35m0.43[0m [36mfilename[0m=[35mtimeout_handler.py[0m [36mfunc_name[0m=[35mwith_timeout[0m [36mlineno[0m=[35m148[0m [36moperation[0m=[35manalyze_request[0m [36mtimeout[0m=[35m120[0m
[2m2025-08-02T17:00:43.645235+00:00[0m [[32m[1minfo     [0m] [1mapi_response                  [0m [[0m[1m[34mmain[0m][0m [36mduration_ms[0m=[35m426.35[0m [36mfilename[0m=[35mstructured_logging.py[0m [36mfunc_name[0m=[35mlog_api_response[0m [36mlineno[0m=[35m223[0m [36mstatus_code[0m=[35m200[0m
[2m2025-08-02T17:00:43.646273+00:00[0m [[32m[1minfo     [0m] [1mapi_request                   [0m [[0m[1m[34mmain[0m][0m [36mclient[0m=[35mtestclient[0m [36mfilename[0m=[35mstructured_logging.py[0m [36mfunc_name[0m=[35mlog_api_request[0m [36mlineno[0m=[35m218[0m [36mmethod[0m=[35mPOST[0m [36mpath[0m=[35m/api/analyze[0m [36mquery_params[0m=[35m{}[0m
[2m2025-08-02T17:00:43.646813+00:00[0m [[32m[1minfo     [0m] [1mToken check                   [0m [[0m[1m[34mmain[0m][0m [36mextra[0m=[35m{'estimated_tokens': 2, 'safe_for_all': True, 'warnings_count': 0}[0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35manalyze_text[0m [36mlineno[0m=[35m291[0m
[2m2025-08-02T17:00:43.646968+00:00[0m [[32m[1minfo     [0m] [1mProcessing analyze request 36085aee-dac3-4396-b1ac-facbe320047f[0m [[0m[1m[34mmain[0m][0m [36mextra[0m=[35m{'request_id': '36085aee-dac3-4396-b1ac-facbe320047f', 'text_length': 9, 'has_openai_key': True, 'has_claude_key': False, 'has_gemini_key': False, 'has_grok_key': False}[0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35manalyze_text[0m [36mlineno[0m=[35m330[0m
[2m2025-08-02T17:00:43.647125+00:00[0m [[32m[1mdebug    [0m] [1mRequest started               [0m [[0m[1m[34mmemory_management[0m][0m [36mactive_requests[0m=[35m1[0m [36mfilename[0m=[35mmemory_management.py[0m [36mfunc_name[0m=[35m__enter__[0m [36mlineno[0m=[35m140[0m [36mrequest_id[0m=[35m36085aee-dac3-4396-b1ac-facbe320047f[0m
[2m2025-08-02T17:00:43.647293+00:00[0m [[32m[1minfo     [0m] [1mCreated new circuit breaker for openai[0m [[0m[1m[34mllm_providers[0m][0m [36mfilename[0m=[35mllm_providers.py[0m [36mfunc_name[0m=[35mget_circuit_breaker[0m [36mkey_prefix[0m=[35mkey-1[0m [36mlineno[0m=[35m59[0m [36mprovider[0m=[35mopenai[0m
[1mRequest options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-a2a19f89-de4b-428f-bbaf-ff5c83eafabf', 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant. Analyze the provided text and provide insights.'}, {'role': 'user', 'content': 'Request 1'}], 'model': 'gpt-4', 'max_tokens': 1000, 'temperature': 0.7}}[0m
[1mSending HTTP Request: POST https://api.openai.com/v1/chat/completions[0m
[1mconnect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None[0m
[1mconnect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11791bcb0>[0m
[1mstart_tls.started ssl_context=<ssl.SSLContext object at 0x11792fb60> server_hostname='api.openai.com' timeout=5.0[0m
[1mstart_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11791ac10>[0m
[1msend_request_headers.started request=<Request [b'POST']>[0m
[1msend_request_headers.complete [0m
[1msend_request_body.started request=<Request [b'POST']>[0m
[1msend_request_body.complete    [0m
[1mreceive_response_headers.started request=<Request [b'POST']>[0m
[1mreceive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Sat, 02 Aug 2025 17:00:43 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'255'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_87288dc7155f6f11be58fefaabf5614e'), (b'x-envoy-upstream-service-time', b'1'), (b'x-envoy-decorator-operation', b'router.openai.svc.cluster.local:5004/*'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=PU4ZPap4kydarHVzw2ljimxXb3eZQ46kVao9anhXC6s-1754154043-1.0.1.1-gSebLccS5g.0MBGIZrQWL8AdxnnBS65HBFee1u0jwTMdDn.dhj4VYmW_h7_Dm7A_27Qr1WYl6hIK6i0M1MQPThyMK_mw013aulZw4X.u1qw; path=/; expires=Sat, 02-Aug-25 17:30:43 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=zjpfsIPhbuEBBD8.NuzoiGKNqW6YYs1eiJ6aPx65FOY-1754154043933-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'968f2215da5a16c8-IAH'), (b'alt-svc', b'h3=":443"; ma=86400')])[0m
[1mreceive_response_body.started request=<Request [b'POST']>[0m
[1mreceive_response_body.complete[0m
[1mresponse_closed.started       [0m
[1mresponse_closed.complete      [0m
[1mHTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers([('date', 'Sat, 02 Aug 2025 17:00:43 GMT'), ('content-type', 'application/json; charset=utf-8'), ('content-length', '255'), ('connection', 'keep-alive'), ('vary', 'Origin'), ('x-request-id', 'req_87288dc7155f6f11be58fefaabf5614e'), ('x-envoy-upstream-service-time', '1'), ('x-envoy-decorator-operation', 'router.openai.svc.cluster.local:5004/*'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=PU4ZPap4kydarHVzw2ljimxXb3eZQ46kVao9anhXC6s-1754154043-1.0.1.1-gSebLccS5g.0MBGIZrQWL8AdxnnBS65HBFee1u0jwTMdDn.dhj4VYmW_h7_Dm7A_27Qr1WYl6hIK6i0M1MQPThyMK_mw013aulZw4X.u1qw; path=/; expires=Sat, 02-Aug-25 17:30:43 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=zjpfsIPhbuEBBD8.NuzoiGKNqW6YYs1eiJ6aPx65FOY-1754154043933-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '968f2215da5a16c8-IAH'), ('alt-svc', 'h3=":443"; ma=86400')])[0m
[1mrequest_id: req_87288dc7155f6f11be58fefaabf5614e[0m
[1mEncountered httpx.HTTPStatusError[0m
[31m╭─[0m[31m──────────────────────────────[0m[31m [0m[1;31mTraceback [0m[1;2;31m(most recent call last)[0m[31m [0m[31m───────────────────────────────[0m[31m─╮[0m
[31m│[0m [2m/Users/ahmed/src/ai-conflict-dashboard/venv/lib/python3.13/site-packages/openai/[0m[1m_base_client.py[0m: [31m│[0m
[31m│[0m 1024 in request                                                                                  [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m   [2m1021 [0m[2m│   │   │   [0mlog.debug([33m"[0m[33mrequest_id: [0m[33m%s[0m[33m"[0m, response.headers.get([33m"[0m[33mx-request-id[0m[33m"[0m))             [31m│[0m
[31m│[0m   [2m1022 [0m[2m│   │   │   [0m                                                                              [31m│[0m
[31m│[0m   [2m1023 [0m[2m│   │   │   [0m[94mtry[0m:                                                                          [31m│[0m
[31m│[0m [31m❱ [0m1024 [2m│   │   │   │   [0mresponse.raise_for_status()                                               [31m│[0m
[31m│[0m   [2m1025 [0m[2m│   │   │   [0m[94mexcept[0m httpx.HTTPStatusError [94mas[0m err:  [2m# thrown on 4xx and 5xx status code[0m     [31m│[0m
[31m│[0m   [2m1026 [0m[2m│   │   │   │   [0m[1;4mlog.debug([0m[1;4;33m"[0m[1;4;33mEncountered httpx.HTTPStatusError[0m[1;4;33m"[0m[1;4m, exc_info=[0m[1;4;94mTrue[0m[1;4m)[0m             [31m│[0m
[31m│[0m   [2m1027 [0m                                                                                          [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m [34m╭─[0m[34m──────────────────────────────────────────[0m[34m locals [0m[34m──────────────────────────────────────────[0m[34m─╮[0m [31m│[0m
[31m│[0m [34m│[0m               [3;33merr[0m[31m =[0m [1;35mHTTPStatusError[0m[1m([0m[32m"Client error '401 Unauthorized' for url [0m                [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [32m'https://api.openai.com/v1/chat/completions'\nFor more information [0m      [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [32mcheck: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401"[0m[1m)[0m    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m     [3;33minput_options[0m[31m =[0m [1;35mFinalRequestOptions[0m[1m([0m                                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mmethod[0m=[32m'post'[0m,                                                       [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33murl[0m=[32m'/chat/completions'[0m,                                             [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mparams[0m=[1m{[0m[1m}[0m,                                                           [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mheaders[0m=[35mNOT_GIVEN[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mmax_retries[0m=[35mNOT_GIVEN[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mtimeout[0m=[35mNOT_GIVEN[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mfiles[0m=[3;35mNone[0m,                                                          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m                                                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [33midempotency_key[0m=[32m'stainless-python-retry-a2a19f89-de4b-428f-bbaf-ff5c83e…[0m [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mpost_parser[0m=[35mNOT_GIVEN[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mfollow_redirects[0m=[3;35mNone[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mjson_data[0m=[1m{[0m                                                          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'messages'[0m: [1m[[0m                                                    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m{[0m                                                            [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   │   [0m[32m'role'[0m: [32m'system'[0m,                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   │   [0m[32m'content'[0m: [32m'You are a helpful assistant. Analyze the [0m    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [32mprovided text and provide insights.'[0m                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m}[0m,                                                           [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m{[0m[32m'role'[0m: [32m'user'[0m, [32m'content'[0m: [32m'Request 1'[0m[1m}[0m                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[1m][0m,                                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'model'[0m: [32m'gpt-4'[0m,                                                [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'max_tokens'[0m: [1;36m1000[0m,                                              [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'temperature'[0m: [1;36m0.7[0m                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[1m}[0m,                                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mextra_json[0m=[3;35mNone[0m                                                      [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [1m)[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m            [3;33mkwargs[0m[31m =[0m [1m{[0m[1m}[0m                                                                       [34m│[0m [31m│[0m
[31m│[0m [34m│[0m       [3;33mmax_retries[0m[31m =[0m [1;36m2[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m           [3;33moptions[0m[31m =[0m [1;35mFinalRequestOptions[0m[1m([0m                                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mmethod[0m=[32m'post'[0m,                                                       [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33murl[0m=[32m'/chat/completions'[0m,                                             [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mparams[0m=[1m{[0m[1m}[0m,                                                           [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mheaders[0m=[35mNOT_GIVEN[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mmax_retries[0m=[35mNOT_GIVEN[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mtimeout[0m=[35mNOT_GIVEN[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mfiles[0m=[3;35mNone[0m,                                                          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m                                                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [33midempotency_key[0m=[32m'stainless-python-retry-a2a19f89-de4b-428f-bbaf-ff5c83e…[0m [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mpost_parser[0m=[35mNOT_GIVEN[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mfollow_redirects[0m=[3;35mNone[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mjson_data[0m=[1m{[0m                                                          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'messages'[0m: [1m[[0m                                                    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m{[0m                                                            [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   │   [0m[32m'role'[0m: [32m'system'[0m,                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   │   [0m[32m'content'[0m: [32m'You are a helpful assistant. Analyze the [0m    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [32mprovided text and provide insights.'[0m                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m}[0m,                                                           [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m{[0m[32m'role'[0m: [32m'user'[0m, [32m'content'[0m: [32m'Request 1'[0m[1m}[0m                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[1m][0m,                                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'model'[0m: [32m'gpt-4'[0m,                                                [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'max_tokens'[0m: [1;36m1000[0m,                                              [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'temperature'[0m: [1;36m0.7[0m                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[1m}[0m,                                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mextra_json[0m=[3;35mNone[0m                                                      [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [1m)[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m [3;33mremaining_retries[0m[31m =[0m [1;36m2[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m           [3;33mrequest[0m[31m =[0m [1m<[0m[1;35mRequest[0m[1;39m([0m[32m'POST'[0m[39m, [0m[32m'https://api.openai.com/v1/chat/completions'[0m[1;39m)[0m[1m>[0m          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m          [3;33mresponse[0m[31m =[0m [1m<[0m[1;95mResponse[0m[39m [0m[1;39m[[0m[1;36m401[0m[39m Unauthorized[0m[1;39m][0m[1m>[0m                                            [34m│[0m [31m│[0m
[31m│[0m [34m│[0m     [3;33mretries_taken[0m[31m =[0m [1;36m0[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m              [3;33mself[0m[31m =[0m [1m<[0m[1;95mopenai.OpenAI[0m[39m object at [0m[1;36m0x1178e68b0[0m[1m>[0m                                    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m            [3;33mstream[0m[31m =[0m [3;91mFalse[0m                                                                    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m        [3;33mstream_cls[0m[31m =[0m openai.Stream[1m[[0mopenai.types.chat.chat_completion_chunk.ChatCompletionChu… [34m│[0m [31m│[0m
[31m│[0m [34m╰──────────────────────────────────────────────────────────────────────────────────────────────╯[0m [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m [2m/Users/ahmed/src/ai-conflict-dashboard/venv/lib/python3.13/site-packages/httpx/[0m[1m_models.py[0m:829 in [31m│[0m
[31m│[0m raise_for_status                                                                                 [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m   [2m 826 [0m[2m│   │   [0m}                                                                                 [31m│[0m
[31m│[0m   [2m 827 [0m[2m│   │   [0merror_type = error_types.get(status_class, [33m"[0m[33mInvalid status code[0m[33m"[0m)                 [31m│[0m
[31m│[0m   [2m 828 [0m[2m│   │   [0mmessage = message.format([96mself[0m, error_type=error_type)                             [31m│[0m
[31m│[0m [31m❱ [0m 829 [2m│   │   [0m[1;4;94mraise[0m[1;4m HTTPStatusError(message, request=request, response=[0m[1;4;96mself[0m[1;4m)[0m                    [31m│[0m
[31m│[0m   [2m 830 [0m[2m│   [0m                                                                                      [31m│[0m
[31m│[0m   [2m 831 [0m[2m│   [0m[94mdef[0m[90m [0m[92mjson[0m([96mself[0m, **kwargs: typing.Any) -> typing.Any:                                   [31m│[0m
[31m│[0m   [2m 832 [0m[2m│   │   [0m[94mreturn[0m jsonlib.loads([96mself[0m.content, **kwargs)                                      [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m [34m╭─[0m[34m──────────────────────────────────────────[0m[34m locals [0m[34m──────────────────────────────────────────[0m[34m─╮[0m [31m│[0m
[31m│[0m [34m│[0m   [3;33merror_type[0m[31m =[0m [32m'Client error'[0m                                                                [34m│[0m [31m│[0m
[31m│[0m [34m│[0m  [3;33merror_types[0m[31m =[0m [1m{[0m                                                                             [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [2;32m│   [0m[1;36m1[0m: [32m'Informational response'[0m,                                              [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [2;32m│   [0m[1;36m3[0m: [32m'Redirect response'[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [2;32m│   [0m[1;36m4[0m: [32m'Client error'[0m,                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [2;32m│   [0m[1;36m5[0m: [32m'Server error'[0m                                                         [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [1m}[0m                                                                             [34m│[0m [31m│[0m
[31m│[0m [34m│[0m      [3;33mmessage[0m[31m =[0m [32m"Client error '401 Unauthorized' for url [0m                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [32m'https://api.openai.com/v1/chat/completi"[0m+[1;36m93[0m                                  [34m│[0m [31m│[0m
[31m│[0m [34m│[0m      [3;33mrequest[0m[31m =[0m [1m<[0m[1;35mRequest[0m[1;39m([0m[32m'POST'[0m[39m, [0m[32m'https://api.openai.com/v1/chat/completions'[0m[1;39m)[0m[1m>[0m               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m         [3;33mself[0m[31m =[0m [1m<[0m[1;95mResponse[0m[39m [0m[1;39m[[0m[1;36m401[0m[39m Unauthorized[0m[1;39m][0m[1m>[0m                                                 [34m│[0m [31m│[0m
[31m│[0m [34m│[0m [3;33mstatus_class[0m[31m =[0m [1;36m4[0m                                                                             [34m│[0m [31m│[0m
[31m│[0m [34m╰──────────────────────────────────────────────────────────────────────────────────────────────╯[0m [31m│[0m
[31m╰──────────────────────────────────────────────────────────────────────────────────────────────────╯[0m
[1;91mHTTPStatusError: [0mClient error [32m'401 Unauthorized'[0m for url 
[32m'https://api.openai.com/v1/chat/completions'[0m
For more information check: [4;94mhttps://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401[0m

[1mNot retrying                  [0m
[1mRe-raising status error       [0m
[2m2025-08-02T17:00:44.009231+00:00[0m [[31m[1merror    [0m] [1mOpenAI call failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: key-1. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}[0m [[0m[1m[34mllm_providers[0m][0m [36merror[0m=[35mError code: 401 - {'error': {'message': 'Incorrect API key provided: key-1. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}[0m [36mfilename[0m=[35mllm_providers.py[0m [36mfunc_name[0m=[35mcall_openai[0m [36mlineno[0m=[35m136[0m
[2m2025-08-02T17:00:44.009501+00:00[0m [[32m[1mdebug    [0m] [1mModel response received       [0m [[0m[1m[34mmain[0m][0m [36mextra[0m=[35m{'request_id': '36085aee-dac3-4396-b1ac-facbe320047f', 'model': 'openai', 'has_error': True, 'response_length': 0}[0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35manalyze_text[0m [36mlineno[0m=[35m365[0m
[2m2025-08-02T17:00:44.009686+00:00[0m [[32m[1minfo     [0m] [1mAnalysis completed successfully[0m [[0m[1m[34mmain[0m][0m [36mextra[0m=[35m{'request_id': '36085aee-dac3-4396-b1ac-facbe320047f', 'successful_models': 0}[0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35manalyze_text[0m [36mlineno[0m=[35m390[0m
[2m2025-08-02T17:00:44.009862+00:00[0m [[32m[1mdebug    [0m] [1mRequest completed             [0m [[0m[1m[34mmemory_management[0m][0m [36mduration_seconds[0m=[35m0.36[0m [36mfilename[0m=[35mmemory_management.py[0m [36mfunc_name[0m=[35m__exit__[0m [36mhad_error[0m=[35mFalse[0m [36mlineno[0m=[35m156[0m [36mrequest_id[0m=[35m36085aee-dac3-4396-b1ac-facbe320047f[0m
[2m2025-08-02T17:00:44.010003+00:00[0m [[32m[1mdebug    [0m] [1mOperation completed within timeout[0m [[0m[1m[34mtimeout_handler[0m][0m [36melapsed[0m=[35m0.36[0m [36mfilename[0m=[35mtimeout_handler.py[0m [36mfunc_name[0m=[35mwith_timeout[0m [36mlineno[0m=[35m148[0m [36moperation[0m=[35manalyze_request[0m [36mtimeout[0m=[35m120[0m
[2m2025-08-02T17:00:44.010243+00:00[0m [[32m[1minfo     [0m] [1mapi_response                  [0m [[0m[1m[34mmain[0m][0m [36mduration_ms[0m=[35m364.0[0m [36mfilename[0m=[35mstructured_logging.py[0m [36mfunc_name[0m=[35mlog_api_response[0m [36mlineno[0m=[35m223[0m [36mstatus_code[0m=[35m200[0m
[2m2025-08-02T17:00:44.011334+00:00[0m [[32m[1minfo     [0m] [1mapi_request                   [0m [[0m[1m[34mmain[0m][0m [36mclient[0m=[35mtestclient[0m [36mfilename[0m=[35mstructured_logging.py[0m [36mfunc_name[0m=[35mlog_api_request[0m [36mlineno[0m=[35m218[0m [36mmethod[0m=[35mPOST[0m [36mpath[0m=[35m/api/analyze[0m [36mquery_params[0m=[35m{}[0m
[2m2025-08-02T17:00:44.011904+00:00[0m [[32m[1minfo     [0m] [1mToken check                   [0m [[0m[1m[34mmain[0m][0m [36mextra[0m=[35m{'estimated_tokens': 2, 'safe_for_all': True, 'warnings_count': 0}[0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35manalyze_text[0m [36mlineno[0m=[35m291[0m
[2m2025-08-02T17:00:44.012067+00:00[0m [[32m[1minfo     [0m] [1mProcessing analyze request f5c908d4-f5b4-4d39-9412-fff3a6425b15[0m [[0m[1m[34mmain[0m][0m [36mextra[0m=[35m{'request_id': 'f5c908d4-f5b4-4d39-9412-fff3a6425b15', 'text_length': 9, 'has_openai_key': True, 'has_claude_key': False, 'has_gemini_key': False, 'has_grok_key': False}[0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35manalyze_text[0m [36mlineno[0m=[35m330[0m
[2m2025-08-02T17:00:44.012219+00:00[0m [[32m[1mdebug    [0m] [1mRequest started               [0m [[0m[1m[34mmemory_management[0m][0m [36mactive_requests[0m=[35m1[0m [36mfilename[0m=[35mmemory_management.py[0m [36mfunc_name[0m=[35m__enter__[0m [36mlineno[0m=[35m140[0m [36mrequest_id[0m=[35mf5c908d4-f5b4-4d39-9412-fff3a6425b15[0m
[2m2025-08-02T17:00:44.012392+00:00[0m [[32m[1minfo     [0m] [1mCreated new circuit breaker for openai[0m [[0m[1m[34mllm_providers[0m][0m [36mfilename[0m=[35mllm_providers.py[0m [36mfunc_name[0m=[35mget_circuit_breaker[0m [36mkey_prefix[0m=[35mkey-2[0m [36mlineno[0m=[35m59[0m [36mprovider[0m=[35mopenai[0m
[1mRequest options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-4ef6999d-87a6-4d23-80c3-e85f843d28ab', 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant. Analyze the provided text and provide insights.'}, {'role': 'user', 'content': 'Request 2'}], 'model': 'gpt-3.5-turbo', 'max_tokens': 1000, 'temperature': 0.7}}[0m
[1mSending HTTP Request: POST https://api.openai.com/v1/chat/completions[0m
[1mconnect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None[0m
[1mconnect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1179307a0>[0m
[1mstart_tls.started ssl_context=<ssl.SSLContext object at 0x11792e0f0> server_hostname='api.openai.com' timeout=5.0[0m
[1mstart_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116dfb650>[0m
[1msend_request_headers.started request=<Request [b'POST']>[0m
[1msend_request_headers.complete [0m
[1msend_request_body.started request=<Request [b'POST']>[0m
[1msend_request_body.complete    [0m
[1mreceive_response_headers.started request=<Request [b'POST']>[0m
[1mreceive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Sat, 02 Aug 2025 17:00:44 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'255'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_a5f2cd494e0747b1b2651569b395520e'), (b'x-envoy-upstream-service-time', b'21'), (b'x-envoy-decorator-operation', b'router.openai.svc.cluster.local:5004/*'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=.K6Q4Qwt0DhFlCTKPbEq8HQB3DoX4ybnf_I2ryAjJws-1754154044-1.0.1.1-NflVq4cThCxqDGmBE2G_K.9Rc_UK.tRiYHhOKyjsSHM5nm8zZYwKa_zszSNFOJLqF21lBcWc5x4Ay2K0wFQWXDhZtX2V8lNEtQ8ZcqE.0QA; path=/; expires=Sat, 02-Aug-25 17:30:44 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=1.vBQtvixWKKhV2h1w0jYlOLL2R1PK2UZVA6EKAz5G0-1754154044325-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'968f22183d34c2fe-IAH'), (b'alt-svc', b'h3=":443"; ma=86400')])[0m
[1mreceive_response_body.started request=<Request [b'POST']>[0m
[1mreceive_response_body.complete[0m
[1mresponse_closed.started       [0m
[1mresponse_closed.complete      [0m
[1mHTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers([('date', 'Sat, 02 Aug 2025 17:00:44 GMT'), ('content-type', 'application/json; charset=utf-8'), ('content-length', '255'), ('connection', 'keep-alive'), ('vary', 'Origin'), ('x-request-id', 'req_a5f2cd494e0747b1b2651569b395520e'), ('x-envoy-upstream-service-time', '21'), ('x-envoy-decorator-operation', 'router.openai.svc.cluster.local:5004/*'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=.K6Q4Qwt0DhFlCTKPbEq8HQB3DoX4ybnf_I2ryAjJws-1754154044-1.0.1.1-NflVq4cThCxqDGmBE2G_K.9Rc_UK.tRiYHhOKyjsSHM5nm8zZYwKa_zszSNFOJLqF21lBcWc5x4Ay2K0wFQWXDhZtX2V8lNEtQ8ZcqE.0QA; path=/; expires=Sat, 02-Aug-25 17:30:44 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=1.vBQtvixWKKhV2h1w0jYlOLL2R1PK2UZVA6EKAz5G0-1754154044325-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '968f22183d34c2fe-IAH'), ('alt-svc', 'h3=":443"; ma=86400')])[0m
[1mrequest_id: req_a5f2cd494e0747b1b2651569b395520e[0m
[1mEncountered httpx.HTTPStatusError[0m
[31m╭─[0m[31m──────────────────────────────[0m[31m [0m[1;31mTraceback [0m[1;2;31m(most recent call last)[0m[31m [0m[31m───────────────────────────────[0m[31m─╮[0m
[31m│[0m [2m/Users/ahmed/src/ai-conflict-dashboard/venv/lib/python3.13/site-packages/openai/[0m[1m_base_client.py[0m: [31m│[0m
[31m│[0m 1024 in request                                                                                  [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m   [2m1021 [0m[2m│   │   │   [0mlog.debug([33m"[0m[33mrequest_id: [0m[33m%s[0m[33m"[0m, response.headers.get([33m"[0m[33mx-request-id[0m[33m"[0m))             [31m│[0m
[31m│[0m   [2m1022 [0m[2m│   │   │   [0m                                                                              [31m│[0m
[31m│[0m   [2m1023 [0m[2m│   │   │   [0m[94mtry[0m:                                                                          [31m│[0m
[31m│[0m [31m❱ [0m1024 [2m│   │   │   │   [0mresponse.raise_for_status()                                               [31m│[0m
[31m│[0m   [2m1025 [0m[2m│   │   │   [0m[94mexcept[0m httpx.HTTPStatusError [94mas[0m err:  [2m# thrown on 4xx and 5xx status code[0m     [31m│[0m
[31m│[0m   [2m1026 [0m[2m│   │   │   │   [0m[1;4mlog.debug([0m[1;4;33m"[0m[1;4;33mEncountered httpx.HTTPStatusError[0m[1;4;33m"[0m[1;4m, exc_info=[0m[1;4;94mTrue[0m[1;4m)[0m             [31m│[0m
[31m│[0m   [2m1027 [0m                                                                                          [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m [34m╭─[0m[34m──────────────────────────────────────────[0m[34m locals [0m[34m──────────────────────────────────────────[0m[34m─╮[0m [31m│[0m
[31m│[0m [34m│[0m               [3;33merr[0m[31m =[0m [1;35mHTTPStatusError[0m[1m([0m[32m"Client error '401 Unauthorized' for url [0m                [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [32m'https://api.openai.com/v1/chat/completions'\nFor more information [0m      [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [32mcheck: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401"[0m[1m)[0m    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m     [3;33minput_options[0m[31m =[0m [1;35mFinalRequestOptions[0m[1m([0m                                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mmethod[0m=[32m'post'[0m,                                                       [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33murl[0m=[32m'/chat/completions'[0m,                                             [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mparams[0m=[1m{[0m[1m}[0m,                                                           [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mheaders[0m=[35mNOT_GIVEN[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mmax_retries[0m=[35mNOT_GIVEN[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mtimeout[0m=[35mNOT_GIVEN[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mfiles[0m=[3;35mNone[0m,                                                          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m                                                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [33midempotency_key[0m=[32m'stainless-python-retry-4ef6999d-87a6-4d23-80c3-e85f843…[0m [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mpost_parser[0m=[35mNOT_GIVEN[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mfollow_redirects[0m=[3;35mNone[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mjson_data[0m=[1m{[0m                                                          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'messages'[0m: [1m[[0m                                                    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m{[0m                                                            [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   │   [0m[32m'role'[0m: [32m'system'[0m,                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   │   [0m[32m'content'[0m: [32m'You are a helpful assistant. Analyze the [0m    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [32mprovided text and provide insights.'[0m                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m}[0m,                                                           [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m{[0m[32m'role'[0m: [32m'user'[0m, [32m'content'[0m: [32m'Request 2'[0m[1m}[0m                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[1m][0m,                                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'model'[0m: [32m'gpt-3.5-turbo'[0m,                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'max_tokens'[0m: [1;36m1000[0m,                                              [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'temperature'[0m: [1;36m0.7[0m                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[1m}[0m,                                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mextra_json[0m=[3;35mNone[0m                                                      [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [1m)[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m            [3;33mkwargs[0m[31m =[0m [1m{[0m[1m}[0m                                                                       [34m│[0m [31m│[0m
[31m│[0m [34m│[0m       [3;33mmax_retries[0m[31m =[0m [1;36m2[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m           [3;33moptions[0m[31m =[0m [1;35mFinalRequestOptions[0m[1m([0m                                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mmethod[0m=[32m'post'[0m,                                                       [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33murl[0m=[32m'/chat/completions'[0m,                                             [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mparams[0m=[1m{[0m[1m}[0m,                                                           [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mheaders[0m=[35mNOT_GIVEN[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mmax_retries[0m=[35mNOT_GIVEN[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mtimeout[0m=[35mNOT_GIVEN[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mfiles[0m=[3;35mNone[0m,                                                          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m                                                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [33midempotency_key[0m=[32m'stainless-python-retry-4ef6999d-87a6-4d23-80c3-e85f843…[0m [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mpost_parser[0m=[35mNOT_GIVEN[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mfollow_redirects[0m=[3;35mNone[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mjson_data[0m=[1m{[0m                                                          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'messages'[0m: [1m[[0m                                                    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m{[0m                                                            [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   │   [0m[32m'role'[0m: [32m'system'[0m,                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   │   [0m[32m'content'[0m: [32m'You are a helpful assistant. Analyze the [0m    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [32mprovided text and provide insights.'[0m                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m}[0m,                                                           [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m{[0m[32m'role'[0m: [32m'user'[0m, [32m'content'[0m: [32m'Request 2'[0m[1m}[0m                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[1m][0m,                                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'model'[0m: [32m'gpt-3.5-turbo'[0m,                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'max_tokens'[0m: [1;36m1000[0m,                                              [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'temperature'[0m: [1;36m0.7[0m                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[1m}[0m,                                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mextra_json[0m=[3;35mNone[0m                                                      [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [1m)[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m [3;33mremaining_retries[0m[31m =[0m [1;36m2[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m           [3;33mrequest[0m[31m =[0m [1m<[0m[1;35mRequest[0m[1;39m([0m[32m'POST'[0m[39m, [0m[32m'https://api.openai.com/v1/chat/completions'[0m[1;39m)[0m[1m>[0m          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m          [3;33mresponse[0m[31m =[0m [1m<[0m[1;95mResponse[0m[39m [0m[1;39m[[0m[1;36m401[0m[39m Unauthorized[0m[1;39m][0m[1m>[0m                                            [34m│[0m [31m│[0m
[31m│[0m [34m│[0m     [3;33mretries_taken[0m[31m =[0m [1;36m0[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m              [3;33mself[0m[31m =[0m [1m<[0m[1;95mopenai.OpenAI[0m[39m object at [0m[1;36m0x1179d7020[0m[1m>[0m                                    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m            [3;33mstream[0m[31m =[0m [3;91mFalse[0m                                                                    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m        [3;33mstream_cls[0m[31m =[0m openai.Stream[1m[[0mopenai.types.chat.chat_completion_chunk.ChatCompletionChu… [34m│[0m [31m│[0m
[31m│[0m [34m╰──────────────────────────────────────────────────────────────────────────────────────────────╯[0m [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m [2m/Users/ahmed/src/ai-conflict-dashboard/venv/lib/python3.13/site-packages/httpx/[0m[1m_models.py[0m:829 in [31m│[0m
[31m│[0m raise_for_status                                                                                 [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m   [2m 826 [0m[2m│   │   [0m}                                                                                 [31m│[0m
[31m│[0m   [2m 827 [0m[2m│   │   [0merror_type = error_types.get(status_class, [33m"[0m[33mInvalid status code[0m[33m"[0m)                 [31m│[0m
[31m│[0m   [2m 828 [0m[2m│   │   [0mmessage = message.format([96mself[0m, error_type=error_type)                             [31m│[0m
[31m│[0m [31m❱ [0m 829 [2m│   │   [0m[1;4;94mraise[0m[1;4m HTTPStatusError(message, request=request, response=[0m[1;4;96mself[0m[1;4m)[0m                    [31m│[0m
[31m│[0m   [2m 830 [0m[2m│   [0m                                                                                      [31m│[0m
[31m│[0m   [2m 831 [0m[2m│   [0m[94mdef[0m[90m [0m[92mjson[0m([96mself[0m, **kwargs: typing.Any) -> typing.Any:                                   [31m│[0m
[31m│[0m   [2m 832 [0m[2m│   │   [0m[94mreturn[0m jsonlib.loads([96mself[0m.content, **kwargs)                                      [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m [34m╭─[0m[34m──────────────────────────────────────────[0m[34m locals [0m[34m──────────────────────────────────────────[0m[34m─╮[0m [31m│[0m
[31m│[0m [34m│[0m   [3;33merror_type[0m[31m =[0m [32m'Client error'[0m                                                                [34m│[0m [31m│[0m
[31m│[0m [34m│[0m  [3;33merror_types[0m[31m =[0m [1m{[0m                                                                             [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [2;32m│   [0m[1;36m1[0m: [32m'Informational response'[0m,                                              [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [2;32m│   [0m[1;36m3[0m: [32m'Redirect response'[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [2;32m│   [0m[1;36m4[0m: [32m'Client error'[0m,                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [2;32m│   [0m[1;36m5[0m: [32m'Server error'[0m                                                         [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [1m}[0m                                                                             [34m│[0m [31m│[0m
[31m│[0m [34m│[0m      [3;33mmessage[0m[31m =[0m [32m"Client error '401 Unauthorized' for url [0m                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [32m'https://api.openai.com/v1/chat/completi"[0m+[1;36m93[0m                                  [34m│[0m [31m│[0m
[31m│[0m [34m│[0m      [3;33mrequest[0m[31m =[0m [1m<[0m[1;35mRequest[0m[1;39m([0m[32m'POST'[0m[39m, [0m[32m'https://api.openai.com/v1/chat/completions'[0m[1;39m)[0m[1m>[0m               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m         [3;33mself[0m[31m =[0m [1m<[0m[1;95mResponse[0m[39m [0m[1;39m[[0m[1;36m401[0m[39m Unauthorized[0m[1;39m][0m[1m>[0m                                                 [34m│[0m [31m│[0m
[31m│[0m [34m│[0m [3;33mstatus_class[0m[31m =[0m [1;36m4[0m                                                                             [34m│[0m [31m│[0m
[31m│[0m [34m╰──────────────────────────────────────────────────────────────────────────────────────────────╯[0m [31m│[0m
[31m╰──────────────────────────────────────────────────────────────────────────────────────────────────╯[0m
[1;91mHTTPStatusError: [0mClient error [32m'401 Unauthorized'[0m for url 
[32m'https://api.openai.com/v1/chat/completions'[0m
For more information check: [4;94mhttps://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401[0m

[1mNot retrying                  [0m
[1mRe-raising status error       [0m
[2m2025-08-02T17:00:44.397953+00:00[0m [[31m[1merror    [0m] [1mOpenAI call failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: key-2. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}[0m [[0m[1m[34mllm_providers[0m][0m [36merror[0m=[35mError code: 401 - {'error': {'message': 'Incorrect API key provided: key-2. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}[0m [36mfilename[0m=[35mllm_providers.py[0m [36mfunc_name[0m=[35mcall_openai[0m [36mlineno[0m=[35m136[0m
[2m2025-08-02T17:00:44.398225+00:00[0m [[32m[1mdebug    [0m] [1mModel response received       [0m [[0m[1m[34mmain[0m][0m [36mextra[0m=[35m{'request_id': 'f5c908d4-f5b4-4d39-9412-fff3a6425b15', 'model': 'openai', 'has_error': True, 'response_length': 0}[0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35manalyze_text[0m [36mlineno[0m=[35m365[0m
[2m2025-08-02T17:00:44.398409+00:00[0m [[32m[1minfo     [0m] [1mAnalysis completed successfully[0m [[0m[1m[34mmain[0m][0m [36mextra[0m=[35m{'request_id': 'f5c908d4-f5b4-4d39-9412-fff3a6425b15', 'successful_models': 0}[0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35manalyze_text[0m [36mlineno[0m=[35m390[0m
[2m2025-08-02T17:00:44.398595+00:00[0m [[32m[1mdebug    [0m] [1mRequest completed             [0m [[0m[1m[34mmemory_management[0m][0m [36mduration_seconds[0m=[35m0.39[0m [36mfilename[0m=[35mmemory_management.py[0m [36mfunc_name[0m=[35m__exit__[0m [36mhad_error[0m=[35mFalse[0m [36mlineno[0m=[35m156[0m [36mrequest_id[0m=[35mf5c908d4-f5b4-4d39-9412-fff3a6425b15[0m
[2m2025-08-02T17:00:44.398737+00:00[0m [[32m[1mdebug    [0m] [1mOperation completed within timeout[0m [[0m[1m[34mtimeout_handler[0m][0m [36melapsed[0m=[35m0.39[0m [36mfilename[0m=[35mtimeout_handler.py[0m [36mfunc_name[0m=[35mwith_timeout[0m [36mlineno[0m=[35m148[0m [36moperation[0m=[35manalyze_request[0m [36mtimeout[0m=[35m120[0m
[2m2025-08-02T17:00:44.398981+00:00[0m [[32m[1minfo     [0m] [1mapi_response                  [0m [[0m[1m[34mmain[0m][0m [36mduration_ms[0m=[35m387.68[0m [36mfilename[0m=[35mstructured_logging.py[0m [36mfunc_name[0m=[35mlog_api_response[0m [36mlineno[0m=[35m223[0m [36mstatus_code[0m=[35m200[0m
[2m2025-08-02T17:00:44.400067+00:00[0m [[32m[1minfo     [0m] [1mapi_request                   [0m [[0m[1m[34mmain[0m][0m [36mclient[0m=[35mtestclient[0m [36mfilename[0m=[35mstructured_logging.py[0m [36mfunc_name[0m=[35mlog_api_request[0m [36mlineno[0m=[35m218[0m [36mmethod[0m=[35mPOST[0m [36mpath[0m=[35m/api/analyze[0m [36mquery_params[0m=[35m{}[0m
[2m2025-08-02T17:00:44.400603+00:00[0m [[32m[1minfo     [0m] [1mToken check                   [0m [[0m[1m[34mmain[0m][0m [36mextra[0m=[35m{'estimated_tokens': 2, 'safe_for_all': True, 'warnings_count': 0}[0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35manalyze_text[0m [36mlineno[0m=[35m291[0m
[2m2025-08-02T17:00:44.400745+00:00[0m [[32m[1minfo     [0m] [1mProcessing analyze request 1772fd79-0223-4acf-ad25-8529726a5aab[0m [[0m[1m[34mmain[0m][0m [36mextra[0m=[35m{'request_id': '1772fd79-0223-4acf-ad25-8529726a5aab', 'text_length': 9, 'has_openai_key': True, 'has_claude_key': False, 'has_gemini_key': False, 'has_grok_key': False}[0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35manalyze_text[0m [36mlineno[0m=[35m330[0m
[2m2025-08-02T17:00:44.400892+00:00[0m [[32m[1mdebug    [0m] [1mRequest started               [0m [[0m[1m[34mmemory_management[0m][0m [36mactive_requests[0m=[35m1[0m [36mfilename[0m=[35mmemory_management.py[0m [36mfunc_name[0m=[35m__enter__[0m [36mlineno[0m=[35m140[0m [36mrequest_id[0m=[35m1772fd79-0223-4acf-ad25-8529726a5aab[0m
[2m2025-08-02T17:00:44.401062+00:00[0m [[32m[1minfo     [0m] [1mCreated new circuit breaker for openai[0m [[0m[1m[34mllm_providers[0m][0m [36mfilename[0m=[35mllm_providers.py[0m [36mfunc_name[0m=[35mget_circuit_breaker[0m [36mkey_prefix[0m=[35mkey-3[0m [36mlineno[0m=[35m59[0m [36mprovider[0m=[35mopenai[0m
[1mRequest options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-bf4cc885-6fac-4bff-ae1a-2881bde9368d', 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant. Analyze the provided text and provide insights.'}, {'role': 'user', 'content': 'Request 3'}], 'model': 'gpt-4', 'max_tokens': 1000, 'temperature': 0.7}}[0m
[1mSending HTTP Request: POST https://api.openai.com/v1/chat/completions[0m
[1mconnect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None[0m
[1mconnect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x117995250>[0m
[1mstart_tls.started ssl_context=<ssl.SSLContext object at 0x11792f1d0> server_hostname='api.openai.com' timeout=5.0[0m
[1mstart_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1179e8ec0>[0m
[1msend_request_headers.started request=<Request [b'POST']>[0m
[1msend_request_headers.complete [0m
[1msend_request_body.started request=<Request [b'POST']>[0m
[1msend_request_body.complete    [0m
[1mreceive_response_headers.started request=<Request [b'POST']>[0m
[1mreceive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Sat, 02 Aug 2025 17:00:44 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'255'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_e5f26e7f0a46446fa1eaa8382fe56933'), (b'x-envoy-upstream-service-time', b'2'), (b'x-envoy-decorator-operation', b'router.openai.svc.cluster.local:5004/*'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=41Oqqd5OFVisEOkJhK2GNAuPlPI6Esbg.4OUGPzyd7c-1754154044-1.0.1.1-h7azBx378yCwOUl.fV2K5w4WavpDIsI5Ciwz1osH6YTC4EYGP5nte6PijRvvF9Jw7AiP2Jjc7GP0wOlKOAXyHMxjhDjHJCTmKMvFu6JZJTQ; path=/; expires=Sat, 02-Aug-25 17:30:44 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=NOx5H.hfhuOkC4mOyJHbsFOz5nOrZUNAR1e0y0qujFE-1754154044670-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'968f221aafe916c1-IAH'), (b'alt-svc', b'h3=":443"; ma=86400')])[0m
[1mreceive_response_body.started request=<Request [b'POST']>[0m
[1mreceive_response_body.complete[0m
[1mresponse_closed.started       [0m
[1mresponse_closed.complete      [0m
[1mHTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers([('date', 'Sat, 02 Aug 2025 17:00:44 GMT'), ('content-type', 'application/json; charset=utf-8'), ('content-length', '255'), ('connection', 'keep-alive'), ('vary', 'Origin'), ('x-request-id', 'req_e5f26e7f0a46446fa1eaa8382fe56933'), ('x-envoy-upstream-service-time', '2'), ('x-envoy-decorator-operation', 'router.openai.svc.cluster.local:5004/*'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=41Oqqd5OFVisEOkJhK2GNAuPlPI6Esbg.4OUGPzyd7c-1754154044-1.0.1.1-h7azBx378yCwOUl.fV2K5w4WavpDIsI5Ciwz1osH6YTC4EYGP5nte6PijRvvF9Jw7AiP2Jjc7GP0wOlKOAXyHMxjhDjHJCTmKMvFu6JZJTQ; path=/; expires=Sat, 02-Aug-25 17:30:44 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=NOx5H.hfhuOkC4mOyJHbsFOz5nOrZUNAR1e0y0qujFE-1754154044670-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '968f221aafe916c1-IAH'), ('alt-svc', 'h3=":443"; ma=86400')])[0m
[1mrequest_id: req_e5f26e7f0a46446fa1eaa8382fe56933[0m
[1mEncountered httpx.HTTPStatusError[0m
[31m╭─[0m[31m──────────────────────────────[0m[31m [0m[1;31mTraceback [0m[1;2;31m(most recent call last)[0m[31m [0m[31m───────────────────────────────[0m[31m─╮[0m
[31m│[0m [2m/Users/ahmed/src/ai-conflict-dashboard/venv/lib/python3.13/site-packages/openai/[0m[1m_base_client.py[0m: [31m│[0m
[31m│[0m 1024 in request                                                                                  [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m   [2m1021 [0m[2m│   │   │   [0mlog.debug([33m"[0m[33mrequest_id: [0m[33m%s[0m[33m"[0m, response.headers.get([33m"[0m[33mx-request-id[0m[33m"[0m))             [31m│[0m
[31m│[0m   [2m1022 [0m[2m│   │   │   [0m                                                                              [31m│[0m
[31m│[0m   [2m1023 [0m[2m│   │   │   [0m[94mtry[0m:                                                                          [31m│[0m
[31m│[0m [31m❱ [0m1024 [2m│   │   │   │   [0mresponse.raise_for_status()                                               [31m│[0m
[31m│[0m   [2m1025 [0m[2m│   │   │   [0m[94mexcept[0m httpx.HTTPStatusError [94mas[0m err:  [2m# thrown on 4xx and 5xx status code[0m     [31m│[0m
[31m│[0m   [2m1026 [0m[2m│   │   │   │   [0m[1;4mlog.debug([0m[1;4;33m"[0m[1;4;33mEncountered httpx.HTTPStatusError[0m[1;4;33m"[0m[1;4m, exc_info=[0m[1;4;94mTrue[0m[1;4m)[0m             [31m│[0m
[31m│[0m   [2m1027 [0m                                                                                          [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m [34m╭─[0m[34m──────────────────────────────────────────[0m[34m locals [0m[34m──────────────────────────────────────────[0m[34m─╮[0m [31m│[0m
[31m│[0m [34m│[0m               [3;33merr[0m[31m =[0m [1;35mHTTPStatusError[0m[1m([0m[32m"Client error '401 Unauthorized' for url [0m                [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [32m'https://api.openai.com/v1/chat/completions'\nFor more information [0m      [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [32mcheck: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401"[0m[1m)[0m    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m     [3;33minput_options[0m[31m =[0m [1;35mFinalRequestOptions[0m[1m([0m                                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mmethod[0m=[32m'post'[0m,                                                       [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33murl[0m=[32m'/chat/completions'[0m,                                             [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mparams[0m=[1m{[0m[1m}[0m,                                                           [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mheaders[0m=[35mNOT_GIVEN[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mmax_retries[0m=[35mNOT_GIVEN[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mtimeout[0m=[35mNOT_GIVEN[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mfiles[0m=[3;35mNone[0m,                                                          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m                                                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [33midempotency_key[0m=[32m'stainless-python-retry-bf4cc885-6fac-4bff-ae1a-2881bde…[0m [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mpost_parser[0m=[35mNOT_GIVEN[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mfollow_redirects[0m=[3;35mNone[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mjson_data[0m=[1m{[0m                                                          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'messages'[0m: [1m[[0m                                                    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m{[0m                                                            [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   │   [0m[32m'role'[0m: [32m'system'[0m,                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   │   [0m[32m'content'[0m: [32m'You are a helpful assistant. Analyze the [0m    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [32mprovided text and provide insights.'[0m                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m}[0m,                                                           [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m{[0m[32m'role'[0m: [32m'user'[0m, [32m'content'[0m: [32m'Request 3'[0m[1m}[0m                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[1m][0m,                                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'model'[0m: [32m'gpt-4'[0m,                                                [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'max_tokens'[0m: [1;36m1000[0m,                                              [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'temperature'[0m: [1;36m0.7[0m                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[1m}[0m,                                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mextra_json[0m=[3;35mNone[0m                                                      [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [1m)[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m            [3;33mkwargs[0m[31m =[0m [1m{[0m[1m}[0m                                                                       [34m│[0m [31m│[0m
[31m│[0m [34m│[0m       [3;33mmax_retries[0m[31m =[0m [1;36m2[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m           [3;33moptions[0m[31m =[0m [1;35mFinalRequestOptions[0m[1m([0m                                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mmethod[0m=[32m'post'[0m,                                                       [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33murl[0m=[32m'/chat/completions'[0m,                                             [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mparams[0m=[1m{[0m[1m}[0m,                                                           [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mheaders[0m=[35mNOT_GIVEN[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mmax_retries[0m=[35mNOT_GIVEN[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mtimeout[0m=[35mNOT_GIVEN[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mfiles[0m=[3;35mNone[0m,                                                          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m                                                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [33midempotency_key[0m=[32m'stainless-python-retry-bf4cc885-6fac-4bff-ae1a-2881bde…[0m [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mpost_parser[0m=[35mNOT_GIVEN[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mfollow_redirects[0m=[3;35mNone[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mjson_data[0m=[1m{[0m                                                          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'messages'[0m: [1m[[0m                                                    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m{[0m                                                            [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   │   [0m[32m'role'[0m: [32m'system'[0m,                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   │   [0m[32m'content'[0m: [32m'You are a helpful assistant. Analyze the [0m    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [32mprovided text and provide insights.'[0m                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m}[0m,                                                           [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m{[0m[32m'role'[0m: [32m'user'[0m, [32m'content'[0m: [32m'Request 3'[0m[1m}[0m                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[1m][0m,                                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'model'[0m: [32m'gpt-4'[0m,                                                [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'max_tokens'[0m: [1;36m1000[0m,                                              [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'temperature'[0m: [1;36m0.7[0m                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[1m}[0m,                                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mextra_json[0m=[3;35mNone[0m                                                      [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [1m)[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m [3;33mremaining_retries[0m[31m =[0m [1;36m2[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m           [3;33mrequest[0m[31m =[0m [1m<[0m[1;35mRequest[0m[1;39m([0m[32m'POST'[0m[39m, [0m[32m'https://api.openai.com/v1/chat/completions'[0m[1;39m)[0m[1m>[0m          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m          [3;33mresponse[0m[31m =[0m [1m<[0m[1;95mResponse[0m[39m [0m[1;39m[[0m[1;36m401[0m[39m Unauthorized[0m[1;39m][0m[1m>[0m                                            [34m│[0m [31m│[0m
[31m│[0m [34m│[0m     [3;33mretries_taken[0m[31m =[0m [1;36m0[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m              [3;33mself[0m[31m =[0m [1m<[0m[1;95mopenai.OpenAI[0m[39m object at [0m[1;36m0x117900850[0m[1m>[0m                                    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m            [3;33mstream[0m[31m =[0m [3;91mFalse[0m                                                                    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m        [3;33mstream_cls[0m[31m =[0m openai.Stream[1m[[0mopenai.types.chat.chat_completion_chunk.ChatCompletionChu… [34m│[0m [31m│[0m
[31m│[0m [34m╰──────────────────────────────────────────────────────────────────────────────────────────────╯[0m [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m [2m/Users/ahmed/src/ai-conflict-dashboard/venv/lib/python3.13/site-packages/httpx/[0m[1m_models.py[0m:829 in [31m│[0m
[31m│[0m raise_for_status                                                                                 [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m   [2m 826 [0m[2m│   │   [0m}                                                                                 [31m│[0m
[31m│[0m   [2m 827 [0m[2m│   │   [0merror_type = error_types.get(status_class, [33m"[0m[33mInvalid status code[0m[33m"[0m)                 [31m│[0m
[31m│[0m   [2m 828 [0m[2m│   │   [0mmessage = message.format([96mself[0m, error_type=error_type)                             [31m│[0m
[31m│[0m [31m❱ [0m 829 [2m│   │   [0m[1;4;94mraise[0m[1;4m HTTPStatusError(message, request=request, response=[0m[1;4;96mself[0m[1;4m)[0m                    [31m│[0m
[31m│[0m   [2m 830 [0m[2m│   [0m                                                                                      [31m│[0m
[31m│[0m   [2m 831 [0m[2m│   [0m[94mdef[0m[90m [0m[92mjson[0m([96mself[0m, **kwargs: typing.Any) -> typing.Any:                                   [31m│[0m
[31m│[0m   [2m 832 [0m[2m│   │   [0m[94mreturn[0m jsonlib.loads([96mself[0m.content, **kwargs)                                      [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m [34m╭─[0m[34m──────────────────────────────────────────[0m[34m locals [0m[34m──────────────────────────────────────────[0m[34m─╮[0m [31m│[0m
[31m│[0m [34m│[0m   [3;33merror_type[0m[31m =[0m [32m'Client error'[0m                                                                [34m│[0m [31m│[0m
[31m│[0m [34m│[0m  [3;33merror_types[0m[31m =[0m [1m{[0m                                                                             [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [2;32m│   [0m[1;36m1[0m: [32m'Informational response'[0m,                                              [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [2;32m│   [0m[1;36m3[0m: [32m'Redirect response'[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [2;32m│   [0m[1;36m4[0m: [32m'Client error'[0m,                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [2;32m│   [0m[1;36m5[0m: [32m'Server error'[0m                                                         [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [1m}[0m                                                                             [34m│[0m [31m│[0m
[31m│[0m [34m│[0m      [3;33mmessage[0m[31m =[0m [32m"Client error '401 Unauthorized' for url [0m                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [32m'https://api.openai.com/v1/chat/completi"[0m+[1;36m93[0m                                  [34m│[0m [31m│[0m
[31m│[0m [34m│[0m      [3;33mrequest[0m[31m =[0m [1m<[0m[1;35mRequest[0m[1;39m([0m[32m'POST'[0m[39m, [0m[32m'https://api.openai.com/v1/chat/completions'[0m[1;39m)[0m[1m>[0m               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m         [3;33mself[0m[31m =[0m [1m<[0m[1;95mResponse[0m[39m [0m[1;39m[[0m[1;36m401[0m[39m Unauthorized[0m[1;39m][0m[1m>[0m                                                 [34m│[0m [31m│[0m
[31m│[0m [34m│[0m [3;33mstatus_class[0m[31m =[0m [1;36m4[0m                                                                             [34m│[0m [31m│[0m
[31m│[0m [34m╰──────────────────────────────────────────────────────────────────────────────────────────────╯[0m [31m│[0m
[31m╰──────────────────────────────────────────────────────────────────────────────────────────────────╯[0m
[1;91mHTTPStatusError: [0mClient error [32m'401 Unauthorized'[0m for url 
[32m'https://api.openai.com/v1/chat/completions'[0m
For more information check: [4;94mhttps://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401[0m

[1mNot retrying                  [0m
[1mRe-raising status error       [0m
[2m2025-08-02T17:00:44.741233+00:00[0m [[31m[1merror    [0m] [1mOpenAI call failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: key-3. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}[0m [[0m[1m[34mllm_providers[0m][0m [36merror[0m=[35mError code: 401 - {'error': {'message': 'Incorrect API key provided: key-3. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}[0m [36mfilename[0m=[35mllm_providers.py[0m [36mfunc_name[0m=[35mcall_openai[0m [36mlineno[0m=[35m136[0m
[2m2025-08-02T17:00:44.741458+00:00[0m [[32m[1mdebug    [0m] [1mModel response received       [0m [[0m[1m[34mmain[0m][0m [36mextra[0m=[35m{'request_id': '1772fd79-0223-4acf-ad25-8529726a5aab', 'model': 'openai', 'has_error': True, 'response_length': 0}[0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35manalyze_text[0m [36mlineno[0m=[35m365[0m
[2m2025-08-02T17:00:44.741628+00:00[0m [[32m[1minfo     [0m] [1mAnalysis completed successfully[0m [[0m[1m[34mmain[0m][0m [36mextra[0m=[35m{'request_id': '1772fd79-0223-4acf-ad25-8529726a5aab', 'successful_models': 0}[0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35manalyze_text[0m [36mlineno[0m=[35m390[0m
[2m2025-08-02T17:00:44.741796+00:00[0m [[32m[1mdebug    [0m] [1mRequest completed             [0m [[0m[1m[34mmemory_management[0m][0m [36mduration_seconds[0m=[35m0.34[0m [36mfilename[0m=[35mmemory_management.py[0m [36mfunc_name[0m=[35m__exit__[0m [36mhad_error[0m=[35mFalse[0m [36mlineno[0m=[35m156[0m [36mrequest_id[0m=[35m1772fd79-0223-4acf-ad25-8529726a5aab[0m
[2m2025-08-02T17:00:44.741933+00:00[0m [[32m[1mdebug    [0m] [1mOperation completed within timeout[0m [[0m[1m[34mtimeout_handler[0m][0m [36melapsed[0m=[35m0.34[0m [36mfilename[0m=[35mtimeout_handler.py[0m [36mfunc_name[0m=[35mwith_timeout[0m [36mlineno[0m=[35m148[0m [36moperation[0m=[35manalyze_request[0m [36mtimeout[0m=[35m120[0m
[2m2025-08-02T17:00:44.742167+00:00[0m [[32m[1minfo     [0m] [1mapi_response                  [0m [[0m[1m[34mmain[0m][0m [36mduration_ms[0m=[35m342.13[0m [36mfilename[0m=[35mstructured_logging.py[0m [36mfunc_name[0m=[35mlog_api_response[0m [36mlineno[0m=[35m223[0m [36mstatus_code[0m=[35m200[0m
[2m2025-08-02T17:00:44.743199+00:00[0m [[32m[1minfo     [0m] [1mapi_request                   [0m [[0m[1m[34mmain[0m][0m [36mclient[0m=[35mtestclient[0m [36mfilename[0m=[35mstructured_logging.py[0m [36mfunc_name[0m=[35mlog_api_request[0m [36mlineno[0m=[35m218[0m [36mmethod[0m=[35mPOST[0m [36mpath[0m=[35m/api/analyze[0m [36mquery_params[0m=[35m{}[0m
[2m2025-08-02T17:00:44.743704+00:00[0m [[32m[1minfo     [0m] [1mToken check                   [0m [[0m[1m[34mmain[0m][0m [36mextra[0m=[35m{'estimated_tokens': 2, 'safe_for_all': True, 'warnings_count': 0}[0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35manalyze_text[0m [36mlineno[0m=[35m291[0m
[2m2025-08-02T17:00:44.743847+00:00[0m [[32m[1minfo     [0m] [1mProcessing analyze request 2974a0e4-8175-44fc-94f3-f0c041896a8c[0m [[0m[1m[34mmain[0m][0m [36mextra[0m=[35m{'request_id': '2974a0e4-8175-44fc-94f3-f0c041896a8c', 'text_length': 9, 'has_openai_key': True, 'has_claude_key': False, 'has_gemini_key': False, 'has_grok_key': False}[0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35manalyze_text[0m [36mlineno[0m=[35m330[0m
[2m2025-08-02T17:00:44.743989+00:00[0m [[32m[1mdebug    [0m] [1mRequest started               [0m [[0m[1m[34mmemory_management[0m][0m [36mactive_requests[0m=[35m1[0m [36mfilename[0m=[35mmemory_management.py[0m [36mfunc_name[0m=[35m__enter__[0m [36mlineno[0m=[35m140[0m [36mrequest_id[0m=[35m2974a0e4-8175-44fc-94f3-f0c041896a8c[0m
[2m2025-08-02T17:00:44.744145+00:00[0m [[32m[1minfo     [0m] [1mCreated new circuit breaker for openai[0m [[0m[1m[34mllm_providers[0m][0m [36mfilename[0m=[35mllm_providers.py[0m [36mfunc_name[0m=[35mget_circuit_breaker[0m [36mkey_prefix[0m=[35mkey-4[0m [36mlineno[0m=[35m59[0m [36mprovider[0m=[35mopenai[0m
[1mRequest options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-b4648eb3-f49a-4fea-b46d-b3b05c181dbb', 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant. Analyze the provided text and provide insights.'}, {'role': 'user', 'content': 'Request 4'}], 'model': 'gpt-3.5-turbo', 'max_tokens': 1000, 'temperature': 0.7}}[0m
[1mSending HTTP Request: POST https://api.openai.com/v1/chat/completions[0m
[1mconnect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None[0m
[1mconnect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1179b1e90>[0m
[1mstart_tls.started ssl_context=<ssl.SSLContext object at 0x11792f4a0> server_hostname='api.openai.com' timeout=5.0[0m
[1mstart_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11794f430>[0m
[1msend_request_headers.started request=<Request [b'POST']>[0m
[1msend_request_headers.complete [0m
[1msend_request_body.started request=<Request [b'POST']>[0m
[1msend_request_body.complete    [0m
[1mreceive_response_headers.started request=<Request [b'POST']>[0m
[1mreceive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Sat, 02 Aug 2025 17:00:45 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'255'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_a78ec863489ca57eeda94e1c40e7df9c'), (b'x-envoy-upstream-service-time', b'31'), (b'x-envoy-decorator-operation', b'router.openai.svc.cluster.local:5004/*'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=X9em7kKH_eMi19gf_A16aNmcUXXX7BmkrgYcDg2g_1U-1754154045-1.0.1.1-jV2KK_cuXokHf3zrhwmH74glxtXTMevN_xYFvomKdLd_qcvcwM3hFyXOgYvK1e_elQR6qyTe7Rvbd_naC.02wiu6mSlYbZO45LF2ZhKjpRc; path=/; expires=Sat, 02-Aug-25 17:30:45 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=Zs6D5x4fzTgg3lV7yH_UcLM6j3aw0swW8c7ujGJGpY8-1754154045030-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'968f221cba7bc8e5-IAH'), (b'alt-svc', b'h3=":443"; ma=86400')])[0m
[1mreceive_response_body.started request=<Request [b'POST']>[0m
[1mreceive_response_body.complete[0m
[1mresponse_closed.started       [0m
[1mresponse_closed.complete      [0m
[1mHTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers([('date', 'Sat, 02 Aug 2025 17:00:45 GMT'), ('content-type', 'application/json; charset=utf-8'), ('content-length', '255'), ('connection', 'keep-alive'), ('vary', 'Origin'), ('x-request-id', 'req_a78ec863489ca57eeda94e1c40e7df9c'), ('x-envoy-upstream-service-time', '31'), ('x-envoy-decorator-operation', 'router.openai.svc.cluster.local:5004/*'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=X9em7kKH_eMi19gf_A16aNmcUXXX7BmkrgYcDg2g_1U-1754154045-1.0.1.1-jV2KK_cuXokHf3zrhwmH74glxtXTMevN_xYFvomKdLd_qcvcwM3hFyXOgYvK1e_elQR6qyTe7Rvbd_naC.02wiu6mSlYbZO45LF2ZhKjpRc; path=/; expires=Sat, 02-Aug-25 17:30:45 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=Zs6D5x4fzTgg3lV7yH_UcLM6j3aw0swW8c7ujGJGpY8-1754154045030-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '968f221cba7bc8e5-IAH'), ('alt-svc', 'h3=":443"; ma=86400')])[0m
[1mrequest_id: req_a78ec863489ca57eeda94e1c40e7df9c[0m
[1mEncountered httpx.HTTPStatusError[0m
[31m╭─[0m[31m──────────────────────────────[0m[31m [0m[1;31mTraceback [0m[1;2;31m(most recent call last)[0m[31m [0m[31m───────────────────────────────[0m[31m─╮[0m
[31m│[0m [2m/Users/ahmed/src/ai-conflict-dashboard/venv/lib/python3.13/site-packages/openai/[0m[1m_base_client.py[0m: [31m│[0m
[31m│[0m 1024 in request                                                                                  [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m   [2m1021 [0m[2m│   │   │   [0mlog.debug([33m"[0m[33mrequest_id: [0m[33m%s[0m[33m"[0m, response.headers.get([33m"[0m[33mx-request-id[0m[33m"[0m))             [31m│[0m
[31m│[0m   [2m1022 [0m[2m│   │   │   [0m                                                                              [31m│[0m
[31m│[0m   [2m1023 [0m[2m│   │   │   [0m[94mtry[0m:                                                                          [31m│[0m
[31m│[0m [31m❱ [0m1024 [2m│   │   │   │   [0mresponse.raise_for_status()                                               [31m│[0m
[31m│[0m   [2m1025 [0m[2m│   │   │   [0m[94mexcept[0m httpx.HTTPStatusError [94mas[0m err:  [2m# thrown on 4xx and 5xx status code[0m     [31m│[0m
[31m│[0m   [2m1026 [0m[2m│   │   │   │   [0m[1;4mlog.debug([0m[1;4;33m"[0m[1;4;33mEncountered httpx.HTTPStatusError[0m[1;4;33m"[0m[1;4m, exc_info=[0m[1;4;94mTrue[0m[1;4m)[0m             [31m│[0m
[31m│[0m   [2m1027 [0m                                                                                          [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m [34m╭─[0m[34m──────────────────────────────────────────[0m[34m locals [0m[34m──────────────────────────────────────────[0m[34m─╮[0m [31m│[0m
[31m│[0m [34m│[0m               [3;33merr[0m[31m =[0m [1;35mHTTPStatusError[0m[1m([0m[32m"Client error '401 Unauthorized' for url [0m                [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [32m'https://api.openai.com/v1/chat/completions'\nFor more information [0m      [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [32mcheck: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401"[0m[1m)[0m    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m     [3;33minput_options[0m[31m =[0m [1;35mFinalRequestOptions[0m[1m([0m                                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mmethod[0m=[32m'post'[0m,                                                       [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33murl[0m=[32m'/chat/completions'[0m,                                             [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mparams[0m=[1m{[0m[1m}[0m,                                                           [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mheaders[0m=[35mNOT_GIVEN[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mmax_retries[0m=[35mNOT_GIVEN[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mtimeout[0m=[35mNOT_GIVEN[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mfiles[0m=[3;35mNone[0m,                                                          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m                                                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [33midempotency_key[0m=[32m'stainless-python-retry-b4648eb3-f49a-4fea-b46d-b3b05c1…[0m [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mpost_parser[0m=[35mNOT_GIVEN[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mfollow_redirects[0m=[3;35mNone[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mjson_data[0m=[1m{[0m                                                          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'messages'[0m: [1m[[0m                                                    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m{[0m                                                            [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   │   [0m[32m'role'[0m: [32m'system'[0m,                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   │   [0m[32m'content'[0m: [32m'You are a helpful assistant. Analyze the [0m    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [32mprovided text and provide insights.'[0m                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m}[0m,                                                           [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m{[0m[32m'role'[0m: [32m'user'[0m, [32m'content'[0m: [32m'Request 4'[0m[1m}[0m                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[1m][0m,                                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'model'[0m: [32m'gpt-3.5-turbo'[0m,                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'max_tokens'[0m: [1;36m1000[0m,                                              [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'temperature'[0m: [1;36m0.7[0m                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[1m}[0m,                                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mextra_json[0m=[3;35mNone[0m                                                      [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [1m)[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m            [3;33mkwargs[0m[31m =[0m [1m{[0m[1m}[0m                                                                       [34m│[0m [31m│[0m
[31m│[0m [34m│[0m       [3;33mmax_retries[0m[31m =[0m [1;36m2[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m           [3;33moptions[0m[31m =[0m [1;35mFinalRequestOptions[0m[1m([0m                                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mmethod[0m=[32m'post'[0m,                                                       [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33murl[0m=[32m'/chat/completions'[0m,                                             [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mparams[0m=[1m{[0m[1m}[0m,                                                           [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mheaders[0m=[35mNOT_GIVEN[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mmax_retries[0m=[35mNOT_GIVEN[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mtimeout[0m=[35mNOT_GIVEN[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mfiles[0m=[3;35mNone[0m,                                                          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m                                                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [33midempotency_key[0m=[32m'stainless-python-retry-b4648eb3-f49a-4fea-b46d-b3b05c1…[0m [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mpost_parser[0m=[35mNOT_GIVEN[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mfollow_redirects[0m=[3;35mNone[0m,                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mjson_data[0m=[1m{[0m                                                          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'messages'[0m: [1m[[0m                                                    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m{[0m                                                            [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   │   [0m[32m'role'[0m: [32m'system'[0m,                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   │   [0m[32m'content'[0m: [32m'You are a helpful assistant. Analyze the [0m    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [32mprovided text and provide insights.'[0m                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m}[0m,                                                           [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   │   [0m[1m{[0m[32m'role'[0m: [32m'user'[0m, [32m'content'[0m: [32m'Request 4'[0m[1m}[0m                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[1m][0m,                                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'model'[0m: [32m'gpt-3.5-turbo'[0m,                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'max_tokens'[0m: [1;36m1000[0m,                                              [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   │   [0m[32m'temperature'[0m: [1;36m0.7[0m                                               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[1m}[0m,                                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [2;32m│   [0m[33mextra_json[0m=[3;35mNone[0m                                                      [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                     [1m)[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m [3;33mremaining_retries[0m[31m =[0m [1;36m2[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m           [3;33mrequest[0m[31m =[0m [1m<[0m[1;35mRequest[0m[1;39m([0m[32m'POST'[0m[39m, [0m[32m'https://api.openai.com/v1/chat/completions'[0m[1;39m)[0m[1m>[0m          [34m│[0m [31m│[0m
[31m│[0m [34m│[0m          [3;33mresponse[0m[31m =[0m [1m<[0m[1;95mResponse[0m[39m [0m[1;39m[[0m[1;36m401[0m[39m Unauthorized[0m[1;39m][0m[1m>[0m                                            [34m│[0m [31m│[0m
[31m│[0m [34m│[0m     [3;33mretries_taken[0m[31m =[0m [1;36m0[0m                                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m              [3;33mself[0m[31m =[0m [1m<[0m[1;95mopenai.OpenAI[0m[39m object at [0m[1;36m0x117903150[0m[1m>[0m                                    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m            [3;33mstream[0m[31m =[0m [3;91mFalse[0m                                                                    [34m│[0m [31m│[0m
[31m│[0m [34m│[0m        [3;33mstream_cls[0m[31m =[0m openai.Stream[1m[[0mopenai.types.chat.chat_completion_chunk.ChatCompletionChu… [34m│[0m [31m│[0m
[31m│[0m [34m╰──────────────────────────────────────────────────────────────────────────────────────────────╯[0m [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m [2m/Users/ahmed/src/ai-conflict-dashboard/venv/lib/python3.13/site-packages/httpx/[0m[1m_models.py[0m:829 in [31m│[0m
[31m│[0m raise_for_status                                                                                 [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m   [2m 826 [0m[2m│   │   [0m}                                                                                 [31m│[0m
[31m│[0m   [2m 827 [0m[2m│   │   [0merror_type = error_types.get(status_class, [33m"[0m[33mInvalid status code[0m[33m"[0m)                 [31m│[0m
[31m│[0m   [2m 828 [0m[2m│   │   [0mmessage = message.format([96mself[0m, error_type=error_type)                             [31m│[0m
[31m│[0m [31m❱ [0m 829 [2m│   │   [0m[1;4;94mraise[0m[1;4m HTTPStatusError(message, request=request, response=[0m[1;4;96mself[0m[1;4m)[0m                    [31m│[0m
[31m│[0m   [2m 830 [0m[2m│   [0m                                                                                      [31m│[0m
[31m│[0m   [2m 831 [0m[2m│   [0m[94mdef[0m[90m [0m[92mjson[0m([96mself[0m, **kwargs: typing.Any) -> typing.Any:                                   [31m│[0m
[31m│[0m   [2m 832 [0m[2m│   │   [0m[94mreturn[0m jsonlib.loads([96mself[0m.content, **kwargs)                                      [31m│[0m
[31m│[0m                                                                                                  [31m│[0m
[31m│[0m [34m╭─[0m[34m──────────────────────────────────────────[0m[34m locals [0m[34m──────────────────────────────────────────[0m[34m─╮[0m [31m│[0m
[31m│[0m [34m│[0m   [3;33merror_type[0m[31m =[0m [32m'Client error'[0m                                                                [34m│[0m [31m│[0m
[31m│[0m [34m│[0m  [3;33merror_types[0m[31m =[0m [1m{[0m                                                                             [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [2;32m│   [0m[1;36m1[0m: [32m'Informational response'[0m,                                              [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [2;32m│   [0m[1;36m3[0m: [32m'Redirect response'[0m,                                                   [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [2;32m│   [0m[1;36m4[0m: [32m'Client error'[0m,                                                        [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [2;32m│   [0m[1;36m5[0m: [32m'Server error'[0m                                                         [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [1m}[0m                                                                             [34m│[0m [31m│[0m
[31m│[0m [34m│[0m      [3;33mmessage[0m[31m =[0m [32m"Client error '401 Unauthorized' for url [0m                                     [34m│[0m [31m│[0m
[31m│[0m [34m│[0m                [32m'https://api.openai.com/v1/chat/completi"[0m+[1;36m93[0m                                  [34m│[0m [31m│[0m
[31m│[0m [34m│[0m      [3;33mrequest[0m[31m =[0m [1m<[0m[1;35mRequest[0m[1;39m([0m[32m'POST'[0m[39m, [0m[32m'https://api.openai.com/v1/chat/completions'[0m[1;39m)[0m[1m>[0m               [34m│[0m [31m│[0m
[31m│[0m [34m│[0m         [3;33mself[0m[31m =[0m [1m<[0m[1;95mResponse[0m[39m [0m[1;39m[[0m[1;36m401[0m[39m Unauthorized[0m[1;39m][0m[1m>[0m                                                 [34m│[0m [31m│[0m
[31m│[0m [34m│[0m [3;33mstatus_class[0m[31m =[0m [1;36m4[0m                                                                             [34m│[0m [31m│[0m
[31m│[0m [34m╰──────────────────────────────────────────────────────────────────────────────────────────────╯[0m [31m│[0m
[31m╰──────────────────────────────────────────────────────────────────────────────────────────────────╯[0m
[1;91mHTTPStatusError: [0mClient error [32m'401 Unauthorized'[0m for url 
[32m'https://api.openai.com/v1/chat/completions'[0m
For more information check: [4;94mhttps://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401[0m

[1mNot retrying                  [0m
[1mRe-raising status error       [0m
[2m2025-08-02T17:00:45.100776+00:00[0m [[31m[1merror    [0m] [1mOpenAI call failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: key-4. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}[0m [[0m[1m[34mllm_providers[0m][0m [36merror[0m=[35mError code: 401 - {'error': {'message': 'Incorrect API key provided: key-4. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}[0m [36mfilename[0m=[35mllm_providers.py[0m [36mfunc_name[0m=[35mcall_openai[0m [36mlineno[0m=[35m136[0m
[2m2025-08-02T17:00:45.101041+00:00[0m [[32m[1mdebug    [0m] [1mModel response received       [0m [[0m[1m[34mmain[0m][0m [36mextra[0m=[35m{'request_id': '2974a0e4-8175-44fc-94f3-f0c041896a8c', 'model': 'openai', 'has_error': True, 'response_length': 0}[0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35manalyze_text[0m [36mlineno[0m=[35m365[0m
[2m2025-08-02T17:00:45.101229+00:00[0m [[32m[1minfo     [0m] [1mAnalysis completed successfully[0m [[0m[1m[34mmain[0m][0m [36mextra[0m=[35m{'request_id': '2974a0e4-8175-44fc-94f3-f0c041896a8c', 'successful_models': 0}[0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35manalyze_text[0m [36mlineno[0m=[35m390[0m
[2m2025-08-02T17:00:45.101404+00:00[0m [[32m[1mdebug    [0m] [1mRequest completed             [0m [[0m[1m[34mmemory_management[0m][0m [36mduration_seconds[0m=[35m0.36[0m [36mfilename[0m=[35mmemory_management.py[0m [36mfunc_name[0m=[35m__exit__[0m [36mhad_error[0m=[35mFalse[0m [36mlineno[0m=[35m156[0m [36mrequest_id[0m=[35m2974a0e4-8175-44fc-94f3-f0c041896a8c[0m
[2m2025-08-02T17:00:45.101547+00:00[0m [[32m[1mdebug    [0m] [1mOperation completed within timeout[0m [[0m[1m[34mtimeout_handler[0m][0m [36melapsed[0m=[35m0.36[0m [36mfilename[0m=[35mtimeout_handler.py[0m [36mfunc_name[0m=[35mwith_timeout[0m [36mlineno[0m=[35m148[0m [36moperation[0m=[35manalyze_request[0m [36mtimeout[0m=[35m120[0m
[2m2025-08-02T17:00:45.101783+00:00[0m [[32m[1minfo     [0m] [1mapi_response                  [0m [[0m[1m[34mmain[0m][0m [36mduration_ms[0m=[35m358.61[0m [36mfilename[0m=[35mstructured_logging.py[0m [36mfunc_name[0m=[35mlog_api_response[0m [36mlineno[0m=[35m223[0m [36mstatus_code[0m=[35m200[0m
[2m2025-08-02T17:00:45.102807+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[2m2025-08-02T17:00:45.103600+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[2m2025-08-02T17:00:45.104221+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[2m2025-08-02T17:00:45.104812+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[2m2025-08-02T17:00:45.105354+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[2m2025-08-02T17:00:45.105936+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[2m2025-08-02T17:00:45.106474+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[2m2025-08-02T17:00:45.107005+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[2m2025-08-02T17:00:45.107555+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[2m2025-08-02T17:00:45.108088+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[2m2025-08-02T17:00:45.108618+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[2m2025-08-02T17:00:45.109163+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[2m2025-08-02T17:00:45.109691+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[2m2025-08-02T17:00:45.110211+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[2m2025-08-02T17:00:45.110717+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
INFO     main:structured_logging.py:218 {'method': 'POST', 'path': '/api/analyze', 'client': 'testclient', 'query_params': {}, 'event': 'api_request', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:43.218901+00:00', 'filename': 'structured_logging.py', 'func_name': 'log_api_request', 'lineno': 218}
INFO     main:main.py:291 {'extra': {'estimated_tokens': 2, 'safe_for_all': True, 'warnings_count': 0}, 'event': 'Token check', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:43.219381+00:00', 'filename': 'main.py', 'func_name': 'analyze_text', 'lineno': 291}
INFO     main:main.py:330 {'extra': {'request_id': 'b1c973e9-52a4-4bdb-a656-1ae3dd7802bc', 'text_length': 9, 'has_openai_key': True, 'has_claude_key': False, 'has_gemini_key': False, 'has_grok_key': False}, 'event': 'Processing analyze request b1c973e9-52a4-4bdb-a656-1ae3dd7802bc', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:43.219514+00:00', 'filename': 'main.py', 'func_name': 'analyze_text', 'lineno': 330}
DEBUG    memory_management:memory_management.py:140 {'request_id': 'b1c973e9-52a4-4bdb-a656-1ae3dd7802bc', 'active_requests': 1, 'event': 'Request started', 'level': 'debug', 'logger': 'memory_management', 'timestamp': '2025-08-02T17:00:43.219659+00:00', 'filename': 'memory_management.py', 'func_name': '__enter__', 'lineno': 140}
INFO     llm_providers:llm_providers.py:59 {'provider': 'openai', 'key_prefix': 'key-0', 'event': 'Created new circuit breaker for openai', 'level': 'info', 'logger': 'llm_providers', 'timestamp': '2025-08-02T17:00:43.219820+00:00', 'filename': 'llm_providers.py', 'func_name': 'get_circuit_breaker', 'lineno': 59}
DEBUG    openai._base_client:_base_client.py:482 Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-f4d98f7c-10f7-4783-bbb7-0a67e130b3e7', 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant. Analyze the provided text and provide insights.'}, {'role': 'user', 'content': 'Request 0'}], 'model': 'gpt-4', 'max_tokens': 1000, 'temperature': 0.7}}
DEBUG    openai._base_client:_base_client.py:975 Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
DEBUG    httpcore.connection:_trace.py:47 connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
DEBUG    httpcore.connection:_trace.py:47 connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1179218b0>
DEBUG    httpcore.connection:_trace.py:47 start_tls.started ssl_context=<ssl.SSLContext object at 0x11792e9f0> server_hostname='api.openai.com' timeout=5.0
DEBUG    httpcore.connection:_trace.py:47 start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1179217c0>
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.complete
DEBUG    httpcore.http11:_trace.py:47 send_request_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_body.complete
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Sat, 02 Aug 2025 17:00:43 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'255'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_2bab7e633949380a5d6299f100989459'), (b'x-envoy-upstream-service-time', b'28'), (b'x-envoy-decorator-operation', b'router.openai.svc.cluster.local:5004/*'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=cTuaC0PRJSylFhOq1lX_2gqJ32YwGGU6xkTFgf0BgSU-1754154043-1.0.1.1-8Kk7y6vjsCyh6aKBfwxS6bu9lmFeCRcyWV_MpKvAcV4KUq2ehco55XdrG2mIx3Gtdhha5k_UfCwYOE8DUNOHmpO23F2z8ZfPhXLFrT_CIpA; path=/; expires=Sat, 02-Aug-25 17:30:43 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=rtJT7jRl4ccecTQfQOiulabPK.X6keIP1USXnCYLVls-1754154043572-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'968f22133ae81284-IAH'), (b'alt-svc', b'h3=":443"; ma=86400')])
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.complete
DEBUG    httpcore.http11:_trace.py:47 response_closed.started
DEBUG    httpcore.http11:_trace.py:47 response_closed.complete
DEBUG    openai._base_client:_base_client.py:1013 HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers([('date', 'Sat, 02 Aug 2025 17:00:43 GMT'), ('content-type', 'application/json; charset=utf-8'), ('content-length', '255'), ('connection', 'keep-alive'), ('vary', 'Origin'), ('x-request-id', 'req_2bab7e633949380a5d6299f100989459'), ('x-envoy-upstream-service-time', '28'), ('x-envoy-decorator-operation', 'router.openai.svc.cluster.local:5004/*'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=cTuaC0PRJSylFhOq1lX_2gqJ32YwGGU6xkTFgf0BgSU-1754154043-1.0.1.1-8Kk7y6vjsCyh6aKBfwxS6bu9lmFeCRcyWV_MpKvAcV4KUq2ehco55XdrG2mIx3Gtdhha5k_UfCwYOE8DUNOHmpO23F2z8ZfPhXLFrT_CIpA; path=/; expires=Sat, 02-Aug-25 17:30:43 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=rtJT7jRl4ccecTQfQOiulabPK.X6keIP1USXnCYLVls-1754154043572-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '968f22133ae81284-IAH'), ('alt-svc', 'h3=":443"; ma=86400')])
DEBUG    openai._base_client:_base_client.py:1021 request_id: req_2bab7e633949380a5d6299f100989459
DEBUG    openai._base_client:_base_client.py:1026 Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/Users/ahmed/src/ai-conflict-dashboard/venv/lib/python3.13/site-packages/openai/_base_client.py", line 1024, in request
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ahmed/src/ai-conflict-dashboard/venv/lib/python3.13/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
DEBUG    openai._base_client:_base_client.py:779 Not retrying
DEBUG    openai._base_client:_base_client.py:1043 Re-raising status error
ERROR    llm_providers:llm_providers.py:136 {'error': "Error code: 401 - {'error': {'message': 'Incorrect API key provided: key-0. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}", 'event': "OpenAI call failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: key-0. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}", 'level': 'error', 'logger': 'llm_providers', 'timestamp': '2025-08-02T17:00:43.644234+00:00', 'filename': 'llm_providers.py', 'func_name': 'call_openai', 'lineno': 136}
DEBUG    main:main.py:365 {'extra': {'request_id': 'b1c973e9-52a4-4bdb-a656-1ae3dd7802bc', 'model': 'openai', 'has_error': True, 'response_length': 0}, 'event': 'Model response received', 'level': 'debug', 'logger': 'main', 'timestamp': '2025-08-02T17:00:43.644491+00:00', 'filename': 'main.py', 'func_name': 'analyze_text', 'lineno': 365}
INFO     main:main.py:390 {'extra': {'request_id': 'b1c973e9-52a4-4bdb-a656-1ae3dd7802bc', 'successful_models': 0}, 'event': 'Analysis completed successfully', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:43.644673+00:00', 'filename': 'main.py', 'func_name': 'analyze_text', 'lineno': 390}
DEBUG    memory_management:memory_management.py:156 {'request_id': 'b1c973e9-52a4-4bdb-a656-1ae3dd7802bc', 'duration_seconds': 0.43, 'had_error': False, 'event': 'Request completed', 'level': 'debug', 'logger': 'memory_management', 'timestamp': '2025-08-02T17:00:43.644849+00:00', 'filename': 'memory_management.py', 'func_name': '__exit__', 'lineno': 156}
DEBUG    timeout_handler:timeout_handler.py:148 {'operation': 'analyze_request', 'elapsed': 0.43, 'timeout': 120, 'event': 'Operation completed within timeout', 'level': 'debug', 'logger': 'timeout_handler', 'timestamp': '2025-08-02T17:00:43.644990+00:00', 'filename': 'timeout_handler.py', 'func_name': 'with_timeout', 'lineno': 148}
INFO     main:structured_logging.py:223 {'status_code': 200, 'duration_ms': 426.35, 'event': 'api_response', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:43.645235+00:00', 'filename': 'structured_logging.py', 'func_name': 'log_api_response', 'lineno': 223}
INFO     main:structured_logging.py:218 {'method': 'POST', 'path': '/api/analyze', 'client': 'testclient', 'query_params': {}, 'event': 'api_request', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:43.646273+00:00', 'filename': 'structured_logging.py', 'func_name': 'log_api_request', 'lineno': 218}
INFO     main:main.py:291 {'extra': {'estimated_tokens': 2, 'safe_for_all': True, 'warnings_count': 0}, 'event': 'Token check', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:43.646813+00:00', 'filename': 'main.py', 'func_name': 'analyze_text', 'lineno': 291}
INFO     main:main.py:330 {'extra': {'request_id': '36085aee-dac3-4396-b1ac-facbe320047f', 'text_length': 9, 'has_openai_key': True, 'has_claude_key': False, 'has_gemini_key': False, 'has_grok_key': False}, 'event': 'Processing analyze request 36085aee-dac3-4396-b1ac-facbe320047f', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:43.646968+00:00', 'filename': 'main.py', 'func_name': 'analyze_text', 'lineno': 330}
DEBUG    memory_management:memory_management.py:140 {'request_id': '36085aee-dac3-4396-b1ac-facbe320047f', 'active_requests': 1, 'event': 'Request started', 'level': 'debug', 'logger': 'memory_management', 'timestamp': '2025-08-02T17:00:43.647125+00:00', 'filename': 'memory_management.py', 'func_name': '__enter__', 'lineno': 140}
INFO     llm_providers:llm_providers.py:59 {'provider': 'openai', 'key_prefix': 'key-1', 'event': 'Created new circuit breaker for openai', 'level': 'info', 'logger': 'llm_providers', 'timestamp': '2025-08-02T17:00:43.647293+00:00', 'filename': 'llm_providers.py', 'func_name': 'get_circuit_breaker', 'lineno': 59}
DEBUG    openai._base_client:_base_client.py:482 Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-a2a19f89-de4b-428f-bbaf-ff5c83eafabf', 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant. Analyze the provided text and provide insights.'}, {'role': 'user', 'content': 'Request 1'}], 'model': 'gpt-4', 'max_tokens': 1000, 'temperature': 0.7}}
DEBUG    openai._base_client:_base_client.py:975 Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
DEBUG    httpcore.connection:_trace.py:47 connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
DEBUG    httpcore.connection:_trace.py:47 connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11791bcb0>
DEBUG    httpcore.connection:_trace.py:47 start_tls.started ssl_context=<ssl.SSLContext object at 0x11792fb60> server_hostname='api.openai.com' timeout=5.0
DEBUG    httpcore.connection:_trace.py:47 start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11791ac10>
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.complete
DEBUG    httpcore.http11:_trace.py:47 send_request_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_body.complete
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Sat, 02 Aug 2025 17:00:43 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'255'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_87288dc7155f6f11be58fefaabf5614e'), (b'x-envoy-upstream-service-time', b'1'), (b'x-envoy-decorator-operation', b'router.openai.svc.cluster.local:5004/*'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=PU4ZPap4kydarHVzw2ljimxXb3eZQ46kVao9anhXC6s-1754154043-1.0.1.1-gSebLccS5g.0MBGIZrQWL8AdxnnBS65HBFee1u0jwTMdDn.dhj4VYmW_h7_Dm7A_27Qr1WYl6hIK6i0M1MQPThyMK_mw013aulZw4X.u1qw; path=/; expires=Sat, 02-Aug-25 17:30:43 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=zjpfsIPhbuEBBD8.NuzoiGKNqW6YYs1eiJ6aPx65FOY-1754154043933-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'968f2215da5a16c8-IAH'), (b'alt-svc', b'h3=":443"; ma=86400')])
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.complete
DEBUG    httpcore.http11:_trace.py:47 response_closed.started
DEBUG    httpcore.http11:_trace.py:47 response_closed.complete
DEBUG    openai._base_client:_base_client.py:1013 HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers([('date', 'Sat, 02 Aug 2025 17:00:43 GMT'), ('content-type', 'application/json; charset=utf-8'), ('content-length', '255'), ('connection', 'keep-alive'), ('vary', 'Origin'), ('x-request-id', 'req_87288dc7155f6f11be58fefaabf5614e'), ('x-envoy-upstream-service-time', '1'), ('x-envoy-decorator-operation', 'router.openai.svc.cluster.local:5004/*'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=PU4ZPap4kydarHVzw2ljimxXb3eZQ46kVao9anhXC6s-1754154043-1.0.1.1-gSebLccS5g.0MBGIZrQWL8AdxnnBS65HBFee1u0jwTMdDn.dhj4VYmW_h7_Dm7A_27Qr1WYl6hIK6i0M1MQPThyMK_mw013aulZw4X.u1qw; path=/; expires=Sat, 02-Aug-25 17:30:43 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=zjpfsIPhbuEBBD8.NuzoiGKNqW6YYs1eiJ6aPx65FOY-1754154043933-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '968f2215da5a16c8-IAH'), ('alt-svc', 'h3=":443"; ma=86400')])
DEBUG    openai._base_client:_base_client.py:1021 request_id: req_87288dc7155f6f11be58fefaabf5614e
DEBUG    openai._base_client:_base_client.py:1026 Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/Users/ahmed/src/ai-conflict-dashboard/venv/lib/python3.13/site-packages/openai/_base_client.py", line 1024, in request
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ahmed/src/ai-conflict-dashboard/venv/lib/python3.13/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
DEBUG    openai._base_client:_base_client.py:779 Not retrying
DEBUG    openai._base_client:_base_client.py:1043 Re-raising status error
ERROR    llm_providers:llm_providers.py:136 {'error': "Error code: 401 - {'error': {'message': 'Incorrect API key provided: key-1. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}", 'event': "OpenAI call failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: key-1. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}", 'level': 'error', 'logger': 'llm_providers', 'timestamp': '2025-08-02T17:00:44.009231+00:00', 'filename': 'llm_providers.py', 'func_name': 'call_openai', 'lineno': 136}
DEBUG    main:main.py:365 {'extra': {'request_id': '36085aee-dac3-4396-b1ac-facbe320047f', 'model': 'openai', 'has_error': True, 'response_length': 0}, 'event': 'Model response received', 'level': 'debug', 'logger': 'main', 'timestamp': '2025-08-02T17:00:44.009501+00:00', 'filename': 'main.py', 'func_name': 'analyze_text', 'lineno': 365}
INFO     main:main.py:390 {'extra': {'request_id': '36085aee-dac3-4396-b1ac-facbe320047f', 'successful_models': 0}, 'event': 'Analysis completed successfully', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:44.009686+00:00', 'filename': 'main.py', 'func_name': 'analyze_text', 'lineno': 390}
DEBUG    memory_management:memory_management.py:156 {'request_id': '36085aee-dac3-4396-b1ac-facbe320047f', 'duration_seconds': 0.36, 'had_error': False, 'event': 'Request completed', 'level': 'debug', 'logger': 'memory_management', 'timestamp': '2025-08-02T17:00:44.009862+00:00', 'filename': 'memory_management.py', 'func_name': '__exit__', 'lineno': 156}
DEBUG    timeout_handler:timeout_handler.py:148 {'operation': 'analyze_request', 'elapsed': 0.36, 'timeout': 120, 'event': 'Operation completed within timeout', 'level': 'debug', 'logger': 'timeout_handler', 'timestamp': '2025-08-02T17:00:44.010003+00:00', 'filename': 'timeout_handler.py', 'func_name': 'with_timeout', 'lineno': 148}
INFO     main:structured_logging.py:223 {'status_code': 200, 'duration_ms': 364.0, 'event': 'api_response', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:44.010243+00:00', 'filename': 'structured_logging.py', 'func_name': 'log_api_response', 'lineno': 223}
INFO     main:structured_logging.py:218 {'method': 'POST', 'path': '/api/analyze', 'client': 'testclient', 'query_params': {}, 'event': 'api_request', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:44.011334+00:00', 'filename': 'structured_logging.py', 'func_name': 'log_api_request', 'lineno': 218}
INFO     main:main.py:291 {'extra': {'estimated_tokens': 2, 'safe_for_all': True, 'warnings_count': 0}, 'event': 'Token check', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:44.011904+00:00', 'filename': 'main.py', 'func_name': 'analyze_text', 'lineno': 291}
INFO     main:main.py:330 {'extra': {'request_id': 'f5c908d4-f5b4-4d39-9412-fff3a6425b15', 'text_length': 9, 'has_openai_key': True, 'has_claude_key': False, 'has_gemini_key': False, 'has_grok_key': False}, 'event': 'Processing analyze request f5c908d4-f5b4-4d39-9412-fff3a6425b15', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:44.012067+00:00', 'filename': 'main.py', 'func_name': 'analyze_text', 'lineno': 330}
DEBUG    memory_management:memory_management.py:140 {'request_id': 'f5c908d4-f5b4-4d39-9412-fff3a6425b15', 'active_requests': 1, 'event': 'Request started', 'level': 'debug', 'logger': 'memory_management', 'timestamp': '2025-08-02T17:00:44.012219+00:00', 'filename': 'memory_management.py', 'func_name': '__enter__', 'lineno': 140}
INFO     llm_providers:llm_providers.py:59 {'provider': 'openai', 'key_prefix': 'key-2', 'event': 'Created new circuit breaker for openai', 'level': 'info', 'logger': 'llm_providers', 'timestamp': '2025-08-02T17:00:44.012392+00:00', 'filename': 'llm_providers.py', 'func_name': 'get_circuit_breaker', 'lineno': 59}
DEBUG    openai._base_client:_base_client.py:482 Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-4ef6999d-87a6-4d23-80c3-e85f843d28ab', 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant. Analyze the provided text and provide insights.'}, {'role': 'user', 'content': 'Request 2'}], 'model': 'gpt-3.5-turbo', 'max_tokens': 1000, 'temperature': 0.7}}
DEBUG    openai._base_client:_base_client.py:975 Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
DEBUG    httpcore.connection:_trace.py:47 connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
DEBUG    httpcore.connection:_trace.py:47 connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1179307a0>
DEBUG    httpcore.connection:_trace.py:47 start_tls.started ssl_context=<ssl.SSLContext object at 0x11792e0f0> server_hostname='api.openai.com' timeout=5.0
DEBUG    httpcore.connection:_trace.py:47 start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x116dfb650>
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.complete
DEBUG    httpcore.http11:_trace.py:47 send_request_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_body.complete
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Sat, 02 Aug 2025 17:00:44 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'255'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_a5f2cd494e0747b1b2651569b395520e'), (b'x-envoy-upstream-service-time', b'21'), (b'x-envoy-decorator-operation', b'router.openai.svc.cluster.local:5004/*'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=.K6Q4Qwt0DhFlCTKPbEq8HQB3DoX4ybnf_I2ryAjJws-1754154044-1.0.1.1-NflVq4cThCxqDGmBE2G_K.9Rc_UK.tRiYHhOKyjsSHM5nm8zZYwKa_zszSNFOJLqF21lBcWc5x4Ay2K0wFQWXDhZtX2V8lNEtQ8ZcqE.0QA; path=/; expires=Sat, 02-Aug-25 17:30:44 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=1.vBQtvixWKKhV2h1w0jYlOLL2R1PK2UZVA6EKAz5G0-1754154044325-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'968f22183d34c2fe-IAH'), (b'alt-svc', b'h3=":443"; ma=86400')])
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.complete
DEBUG    httpcore.http11:_trace.py:47 response_closed.started
DEBUG    httpcore.http11:_trace.py:47 response_closed.complete
DEBUG    openai._base_client:_base_client.py:1013 HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers([('date', 'Sat, 02 Aug 2025 17:00:44 GMT'), ('content-type', 'application/json; charset=utf-8'), ('content-length', '255'), ('connection', 'keep-alive'), ('vary', 'Origin'), ('x-request-id', 'req_a5f2cd494e0747b1b2651569b395520e'), ('x-envoy-upstream-service-time', '21'), ('x-envoy-decorator-operation', 'router.openai.svc.cluster.local:5004/*'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=.K6Q4Qwt0DhFlCTKPbEq8HQB3DoX4ybnf_I2ryAjJws-1754154044-1.0.1.1-NflVq4cThCxqDGmBE2G_K.9Rc_UK.tRiYHhOKyjsSHM5nm8zZYwKa_zszSNFOJLqF21lBcWc5x4Ay2K0wFQWXDhZtX2V8lNEtQ8ZcqE.0QA; path=/; expires=Sat, 02-Aug-25 17:30:44 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=1.vBQtvixWKKhV2h1w0jYlOLL2R1PK2UZVA6EKAz5G0-1754154044325-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '968f22183d34c2fe-IAH'), ('alt-svc', 'h3=":443"; ma=86400')])
DEBUG    openai._base_client:_base_client.py:1021 request_id: req_a5f2cd494e0747b1b2651569b395520e
DEBUG    openai._base_client:_base_client.py:1026 Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/Users/ahmed/src/ai-conflict-dashboard/venv/lib/python3.13/site-packages/openai/_base_client.py", line 1024, in request
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ahmed/src/ai-conflict-dashboard/venv/lib/python3.13/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
DEBUG    openai._base_client:_base_client.py:779 Not retrying
DEBUG    openai._base_client:_base_client.py:1043 Re-raising status error
ERROR    llm_providers:llm_providers.py:136 {'error': "Error code: 401 - {'error': {'message': 'Incorrect API key provided: key-2. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}", 'event': "OpenAI call failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: key-2. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}", 'level': 'error', 'logger': 'llm_providers', 'timestamp': '2025-08-02T17:00:44.397953+00:00', 'filename': 'llm_providers.py', 'func_name': 'call_openai', 'lineno': 136}
DEBUG    main:main.py:365 {'extra': {'request_id': 'f5c908d4-f5b4-4d39-9412-fff3a6425b15', 'model': 'openai', 'has_error': True, 'response_length': 0}, 'event': 'Model response received', 'level': 'debug', 'logger': 'main', 'timestamp': '2025-08-02T17:00:44.398225+00:00', 'filename': 'main.py', 'func_name': 'analyze_text', 'lineno': 365}
INFO     main:main.py:390 {'extra': {'request_id': 'f5c908d4-f5b4-4d39-9412-fff3a6425b15', 'successful_models': 0}, 'event': 'Analysis completed successfully', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:44.398409+00:00', 'filename': 'main.py', 'func_name': 'analyze_text', 'lineno': 390}
DEBUG    memory_management:memory_management.py:156 {'request_id': 'f5c908d4-f5b4-4d39-9412-fff3a6425b15', 'duration_seconds': 0.39, 'had_error': False, 'event': 'Request completed', 'level': 'debug', 'logger': 'memory_management', 'timestamp': '2025-08-02T17:00:44.398595+00:00', 'filename': 'memory_management.py', 'func_name': '__exit__', 'lineno': 156}
DEBUG    timeout_handler:timeout_handler.py:148 {'operation': 'analyze_request', 'elapsed': 0.39, 'timeout': 120, 'event': 'Operation completed within timeout', 'level': 'debug', 'logger': 'timeout_handler', 'timestamp': '2025-08-02T17:00:44.398737+00:00', 'filename': 'timeout_handler.py', 'func_name': 'with_timeout', 'lineno': 148}
INFO     main:structured_logging.py:223 {'status_code': 200, 'duration_ms': 387.68, 'event': 'api_response', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:44.398981+00:00', 'filename': 'structured_logging.py', 'func_name': 'log_api_response', 'lineno': 223}
INFO     main:structured_logging.py:218 {'method': 'POST', 'path': '/api/analyze', 'client': 'testclient', 'query_params': {}, 'event': 'api_request', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:44.400067+00:00', 'filename': 'structured_logging.py', 'func_name': 'log_api_request', 'lineno': 218}
INFO     main:main.py:291 {'extra': {'estimated_tokens': 2, 'safe_for_all': True, 'warnings_count': 0}, 'event': 'Token check', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:44.400603+00:00', 'filename': 'main.py', 'func_name': 'analyze_text', 'lineno': 291}
INFO     main:main.py:330 {'extra': {'request_id': '1772fd79-0223-4acf-ad25-8529726a5aab', 'text_length': 9, 'has_openai_key': True, 'has_claude_key': False, 'has_gemini_key': False, 'has_grok_key': False}, 'event': 'Processing analyze request 1772fd79-0223-4acf-ad25-8529726a5aab', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:44.400745+00:00', 'filename': 'main.py', 'func_name': 'analyze_text', 'lineno': 330}
DEBUG    memory_management:memory_management.py:140 {'request_id': '1772fd79-0223-4acf-ad25-8529726a5aab', 'active_requests': 1, 'event': 'Request started', 'level': 'debug', 'logger': 'memory_management', 'timestamp': '2025-08-02T17:00:44.400892+00:00', 'filename': 'memory_management.py', 'func_name': '__enter__', 'lineno': 140}
INFO     llm_providers:llm_providers.py:59 {'provider': 'openai', 'key_prefix': 'key-3', 'event': 'Created new circuit breaker for openai', 'level': 'info', 'logger': 'llm_providers', 'timestamp': '2025-08-02T17:00:44.401062+00:00', 'filename': 'llm_providers.py', 'func_name': 'get_circuit_breaker', 'lineno': 59}
DEBUG    openai._base_client:_base_client.py:482 Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-bf4cc885-6fac-4bff-ae1a-2881bde9368d', 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant. Analyze the provided text and provide insights.'}, {'role': 'user', 'content': 'Request 3'}], 'model': 'gpt-4', 'max_tokens': 1000, 'temperature': 0.7}}
DEBUG    openai._base_client:_base_client.py:975 Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
DEBUG    httpcore.connection:_trace.py:47 connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
DEBUG    httpcore.connection:_trace.py:47 connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x117995250>
DEBUG    httpcore.connection:_trace.py:47 start_tls.started ssl_context=<ssl.SSLContext object at 0x11792f1d0> server_hostname='api.openai.com' timeout=5.0
DEBUG    httpcore.connection:_trace.py:47 start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1179e8ec0>
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.complete
DEBUG    httpcore.http11:_trace.py:47 send_request_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_body.complete
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Sat, 02 Aug 2025 17:00:44 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'255'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_e5f26e7f0a46446fa1eaa8382fe56933'), (b'x-envoy-upstream-service-time', b'2'), (b'x-envoy-decorator-operation', b'router.openai.svc.cluster.local:5004/*'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=41Oqqd5OFVisEOkJhK2GNAuPlPI6Esbg.4OUGPzyd7c-1754154044-1.0.1.1-h7azBx378yCwOUl.fV2K5w4WavpDIsI5Ciwz1osH6YTC4EYGP5nte6PijRvvF9Jw7AiP2Jjc7GP0wOlKOAXyHMxjhDjHJCTmKMvFu6JZJTQ; path=/; expires=Sat, 02-Aug-25 17:30:44 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=NOx5H.hfhuOkC4mOyJHbsFOz5nOrZUNAR1e0y0qujFE-1754154044670-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'968f221aafe916c1-IAH'), (b'alt-svc', b'h3=":443"; ma=86400')])
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.complete
DEBUG    httpcore.http11:_trace.py:47 response_closed.started
DEBUG    httpcore.http11:_trace.py:47 response_closed.complete
DEBUG    openai._base_client:_base_client.py:1013 HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers([('date', 'Sat, 02 Aug 2025 17:00:44 GMT'), ('content-type', 'application/json; charset=utf-8'), ('content-length', '255'), ('connection', 'keep-alive'), ('vary', 'Origin'), ('x-request-id', 'req_e5f26e7f0a46446fa1eaa8382fe56933'), ('x-envoy-upstream-service-time', '2'), ('x-envoy-decorator-operation', 'router.openai.svc.cluster.local:5004/*'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=41Oqqd5OFVisEOkJhK2GNAuPlPI6Esbg.4OUGPzyd7c-1754154044-1.0.1.1-h7azBx378yCwOUl.fV2K5w4WavpDIsI5Ciwz1osH6YTC4EYGP5nte6PijRvvF9Jw7AiP2Jjc7GP0wOlKOAXyHMxjhDjHJCTmKMvFu6JZJTQ; path=/; expires=Sat, 02-Aug-25 17:30:44 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=NOx5H.hfhuOkC4mOyJHbsFOz5nOrZUNAR1e0y0qujFE-1754154044670-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '968f221aafe916c1-IAH'), ('alt-svc', 'h3=":443"; ma=86400')])
DEBUG    openai._base_client:_base_client.py:1021 request_id: req_e5f26e7f0a46446fa1eaa8382fe56933
DEBUG    openai._base_client:_base_client.py:1026 Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/Users/ahmed/src/ai-conflict-dashboard/venv/lib/python3.13/site-packages/openai/_base_client.py", line 1024, in request
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ahmed/src/ai-conflict-dashboard/venv/lib/python3.13/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
DEBUG    openai._base_client:_base_client.py:779 Not retrying
DEBUG    openai._base_client:_base_client.py:1043 Re-raising status error
ERROR    llm_providers:llm_providers.py:136 {'error': "Error code: 401 - {'error': {'message': 'Incorrect API key provided: key-3. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}", 'event': "OpenAI call failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: key-3. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}", 'level': 'error', 'logger': 'llm_providers', 'timestamp': '2025-08-02T17:00:44.741233+00:00', 'filename': 'llm_providers.py', 'func_name': 'call_openai', 'lineno': 136}
DEBUG    main:main.py:365 {'extra': {'request_id': '1772fd79-0223-4acf-ad25-8529726a5aab', 'model': 'openai', 'has_error': True, 'response_length': 0}, 'event': 'Model response received', 'level': 'debug', 'logger': 'main', 'timestamp': '2025-08-02T17:00:44.741458+00:00', 'filename': 'main.py', 'func_name': 'analyze_text', 'lineno': 365}
INFO     main:main.py:390 {'extra': {'request_id': '1772fd79-0223-4acf-ad25-8529726a5aab', 'successful_models': 0}, 'event': 'Analysis completed successfully', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:44.741628+00:00', 'filename': 'main.py', 'func_name': 'analyze_text', 'lineno': 390}
DEBUG    memory_management:memory_management.py:156 {'request_id': '1772fd79-0223-4acf-ad25-8529726a5aab', 'duration_seconds': 0.34, 'had_error': False, 'event': 'Request completed', 'level': 'debug', 'logger': 'memory_management', 'timestamp': '2025-08-02T17:00:44.741796+00:00', 'filename': 'memory_management.py', 'func_name': '__exit__', 'lineno': 156}
DEBUG    timeout_handler:timeout_handler.py:148 {'operation': 'analyze_request', 'elapsed': 0.34, 'timeout': 120, 'event': 'Operation completed within timeout', 'level': 'debug', 'logger': 'timeout_handler', 'timestamp': '2025-08-02T17:00:44.741933+00:00', 'filename': 'timeout_handler.py', 'func_name': 'with_timeout', 'lineno': 148}
INFO     main:structured_logging.py:223 {'status_code': 200, 'duration_ms': 342.13, 'event': 'api_response', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:44.742167+00:00', 'filename': 'structured_logging.py', 'func_name': 'log_api_response', 'lineno': 223}
INFO     main:structured_logging.py:218 {'method': 'POST', 'path': '/api/analyze', 'client': 'testclient', 'query_params': {}, 'event': 'api_request', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:44.743199+00:00', 'filename': 'structured_logging.py', 'func_name': 'log_api_request', 'lineno': 218}
INFO     main:main.py:291 {'extra': {'estimated_tokens': 2, 'safe_for_all': True, 'warnings_count': 0}, 'event': 'Token check', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:44.743704+00:00', 'filename': 'main.py', 'func_name': 'analyze_text', 'lineno': 291}
INFO     main:main.py:330 {'extra': {'request_id': '2974a0e4-8175-44fc-94f3-f0c041896a8c', 'text_length': 9, 'has_openai_key': True, 'has_claude_key': False, 'has_gemini_key': False, 'has_grok_key': False}, 'event': 'Processing analyze request 2974a0e4-8175-44fc-94f3-f0c041896a8c', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:44.743847+00:00', 'filename': 'main.py', 'func_name': 'analyze_text', 'lineno': 330}
DEBUG    memory_management:memory_management.py:140 {'request_id': '2974a0e4-8175-44fc-94f3-f0c041896a8c', 'active_requests': 1, 'event': 'Request started', 'level': 'debug', 'logger': 'memory_management', 'timestamp': '2025-08-02T17:00:44.743989+00:00', 'filename': 'memory_management.py', 'func_name': '__enter__', 'lineno': 140}
INFO     llm_providers:llm_providers.py:59 {'provider': 'openai', 'key_prefix': 'key-4', 'event': 'Created new circuit breaker for openai', 'level': 'info', 'logger': 'llm_providers', 'timestamp': '2025-08-02T17:00:44.744145+00:00', 'filename': 'llm_providers.py', 'func_name': 'get_circuit_breaker', 'lineno': 59}
DEBUG    openai._base_client:_base_client.py:482 Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-b4648eb3-f49a-4fea-b46d-b3b05c181dbb', 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant. Analyze the provided text and provide insights.'}, {'role': 'user', 'content': 'Request 4'}], 'model': 'gpt-3.5-turbo', 'max_tokens': 1000, 'temperature': 0.7}}
DEBUG    openai._base_client:_base_client.py:975 Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
DEBUG    httpcore.connection:_trace.py:47 connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
DEBUG    httpcore.connection:_trace.py:47 connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1179b1e90>
DEBUG    httpcore.connection:_trace.py:47 start_tls.started ssl_context=<ssl.SSLContext object at 0x11792f4a0> server_hostname='api.openai.com' timeout=5.0
DEBUG    httpcore.connection:_trace.py:47 start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11794f430>
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.complete
DEBUG    httpcore.http11:_trace.py:47 send_request_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_body.complete
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Sat, 02 Aug 2025 17:00:45 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'255'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_a78ec863489ca57eeda94e1c40e7df9c'), (b'x-envoy-upstream-service-time', b'31'), (b'x-envoy-decorator-operation', b'router.openai.svc.cluster.local:5004/*'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=X9em7kKH_eMi19gf_A16aNmcUXXX7BmkrgYcDg2g_1U-1754154045-1.0.1.1-jV2KK_cuXokHf3zrhwmH74glxtXTMevN_xYFvomKdLd_qcvcwM3hFyXOgYvK1e_elQR6qyTe7Rvbd_naC.02wiu6mSlYbZO45LF2ZhKjpRc; path=/; expires=Sat, 02-Aug-25 17:30:45 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=Zs6D5x4fzTgg3lV7yH_UcLM6j3aw0swW8c7ujGJGpY8-1754154045030-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'968f221cba7bc8e5-IAH'), (b'alt-svc', b'h3=":443"; ma=86400')])
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.complete
DEBUG    httpcore.http11:_trace.py:47 response_closed.started
DEBUG    httpcore.http11:_trace.py:47 response_closed.complete
DEBUG    openai._base_client:_base_client.py:1013 HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers([('date', 'Sat, 02 Aug 2025 17:00:45 GMT'), ('content-type', 'application/json; charset=utf-8'), ('content-length', '255'), ('connection', 'keep-alive'), ('vary', 'Origin'), ('x-request-id', 'req_a78ec863489ca57eeda94e1c40e7df9c'), ('x-envoy-upstream-service-time', '31'), ('x-envoy-decorator-operation', 'router.openai.svc.cluster.local:5004/*'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=X9em7kKH_eMi19gf_A16aNmcUXXX7BmkrgYcDg2g_1U-1754154045-1.0.1.1-jV2KK_cuXokHf3zrhwmH74glxtXTMevN_xYFvomKdLd_qcvcwM3hFyXOgYvK1e_elQR6qyTe7Rvbd_naC.02wiu6mSlYbZO45LF2ZhKjpRc; path=/; expires=Sat, 02-Aug-25 17:30:45 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=Zs6D5x4fzTgg3lV7yH_UcLM6j3aw0swW8c7ujGJGpY8-1754154045030-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '968f221cba7bc8e5-IAH'), ('alt-svc', 'h3=":443"; ma=86400')])
DEBUG    openai._base_client:_base_client.py:1021 request_id: req_a78ec863489ca57eeda94e1c40e7df9c
DEBUG    openai._base_client:_base_client.py:1026 Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/Users/ahmed/src/ai-conflict-dashboard/venv/lib/python3.13/site-packages/openai/_base_client.py", line 1024, in request
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ahmed/src/ai-conflict-dashboard/venv/lib/python3.13/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
DEBUG    openai._base_client:_base_client.py:779 Not retrying
DEBUG    openai._base_client:_base_client.py:1043 Re-raising status error
ERROR    llm_providers:llm_providers.py:136 {'error': "Error code: 401 - {'error': {'message': 'Incorrect API key provided: key-4. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}", 'event': "OpenAI call failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: key-4. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}", 'level': 'error', 'logger': 'llm_providers', 'timestamp': '2025-08-02T17:00:45.100776+00:00', 'filename': 'llm_providers.py', 'func_name': 'call_openai', 'lineno': 136}
DEBUG    main:main.py:365 {'extra': {'request_id': '2974a0e4-8175-44fc-94f3-f0c041896a8c', 'model': 'openai', 'has_error': True, 'response_length': 0}, 'event': 'Model response received', 'level': 'debug', 'logger': 'main', 'timestamp': '2025-08-02T17:00:45.101041+00:00', 'filename': 'main.py', 'func_name': 'analyze_text', 'lineno': 365}
INFO     main:main.py:390 {'extra': {'request_id': '2974a0e4-8175-44fc-94f3-f0c041896a8c', 'successful_models': 0}, 'event': 'Analysis completed successfully', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:45.101229+00:00', 'filename': 'main.py', 'func_name': 'analyze_text', 'lineno': 390}
DEBUG    memory_management:memory_management.py:156 {'request_id': '2974a0e4-8175-44fc-94f3-f0c041896a8c', 'duration_seconds': 0.36, 'had_error': False, 'event': 'Request completed', 'level': 'debug', 'logger': 'memory_management', 'timestamp': '2025-08-02T17:00:45.101404+00:00', 'filename': 'memory_management.py', 'func_name': '__exit__', 'lineno': 156}
DEBUG    timeout_handler:timeout_handler.py:148 {'operation': 'analyze_request', 'elapsed': 0.36, 'timeout': 120, 'event': 'Operation completed within timeout', 'level': 'debug', 'logger': 'timeout_handler', 'timestamp': '2025-08-02T17:00:45.101547+00:00', 'filename': 'timeout_handler.py', 'func_name': 'with_timeout', 'lineno': 148}
INFO     main:structured_logging.py:223 {'status_code': 200, 'duration_ms': 358.61, 'event': 'api_response', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:45.101783+00:00', 'filename': 'structured_logging.py', 'func_name': 'log_api_response', 'lineno': 223}
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.102807+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.103600+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.104221+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.104812+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.105354+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.105936+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.106474+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.107005+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.107555+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.108088+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.108618+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.109163+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.109691+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.110211+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.110717+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
--------------------------- Captured stdout teardown ---------------------------
[2m2025-08-02T17:00:45.114931+00:00[0m [[32m[1minfo     [0m] [1mShutting down AI Conflict Dashboard API[0m [[0m[1m[34mmain[0m][0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35mlifespan[0m [36mlineno[0m=[35m45[0m
[2m2025-08-02T17:00:45.115148+00:00[0m [[32m[1minfo     [0m] [1mMemory manager stopped        [0m [[0m[1m[34mmemory_management[0m][0m [36mfilename[0m=[35mmemory_management.py[0m [36mfunc_name[0m=[35mstop[0m [36mlineno[0m=[35m54[0m
---------------------------- Captured log teardown -----------------------------
INFO     main:main.py:45 {'event': 'Shutting down AI Conflict Dashboard API', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:45.114931+00:00', 'filename': 'main.py', 'func_name': 'lifespan', 'lineno': 45}
INFO     memory_management:memory_management.py:54 {'event': 'Memory manager stopped', 'level': 'info', 'logger': 'memory_management', 'timestamp': '2025-08-02T17:00:45.115148+00:00', 'filename': 'memory_management.py', 'func_name': 'stop', 'lineno': 54}
____________ TestResourceExhaustion.test_infinite_recursion_in_text ____________
tests/test_adversarial.py:154: in test_infinite_recursion_in_text
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
---------------------------- Captured stdout setup -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.122083+00:00[0m [[32m[1minfo     [0m] [1mStarting AI Conflict Dashboard API[0m [[0m[1m[34mmain[0m][0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35mlifespan[0m [36mlineno[0m=[35m41[0m
[2m2025-08-02T17:00:45.122225+00:00[0m [[32m[1minfo     [0m] [1mMemory manager started        [0m [[0m[1m[34mmemory_management[0m][0m [36mfilename[0m=[35mmemory_management.py[0m [36mfunc_name[0m=[35mstart[0m [36mlineno[0m=[35m44[0m
------------------------------ Captured log setup ------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
INFO     main:main.py:41 {'event': 'Starting AI Conflict Dashboard API', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:45.122083+00:00', 'filename': 'main.py', 'func_name': 'lifespan', 'lineno': 41}
INFO     memory_management:memory_management.py:44 {'event': 'Memory manager started', 'level': 'info', 'logger': 'memory_management', 'timestamp': '2025-08-02T17:00:45.122225+00:00', 'filename': 'memory_management.py', 'func_name': 'start', 'lineno': 44}
----------------------------- Captured stdout call -----------------------------
[2m2025-08-02T17:00:45.122976+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.122976+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
--------------------------- Captured stdout teardown ---------------------------
[2m2025-08-02T17:00:45.126477+00:00[0m [[32m[1minfo     [0m] [1mShutting down AI Conflict Dashboard API[0m [[0m[1m[34mmain[0m][0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35mlifespan[0m [36mlineno[0m=[35m45[0m
[2m2025-08-02T17:00:45.126681+00:00[0m [[32m[1minfo     [0m] [1mMemory manager stopped        [0m [[0m[1m[34mmemory_management[0m][0m [36mfilename[0m=[35mmemory_management.py[0m [36mfunc_name[0m=[35mstop[0m [36mlineno[0m=[35m54[0m
---------------------------- Captured log teardown -----------------------------
INFO     main:main.py:45 {'event': 'Shutting down AI Conflict Dashboard API', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:45.126477+00:00', 'filename': 'main.py', 'func_name': 'lifespan', 'lineno': 45}
INFO     memory_management:memory_management.py:54 {'event': 'Memory manager stopped', 'level': 'info', 'logger': 'memory_management', 'timestamp': '2025-08-02T17:00:45.126681+00:00', 'filename': 'memory_management.py', 'func_name': 'stop', 'lineno': 54}
____________ TestChunkingEdgeCases.test_chunk_boundary_code_blocks _____________
tests/test_adversarial.py:197: in test_chunk_boundary_code_blocks
    chunk_text(text, chunk_size=3500)
E   TypeError: chunk_text() got an unexpected keyword argument 'chunk_size'
__________ TestChunkingEdgeCases.test_chunk_with_no_good_split_points __________
tests/test_adversarial.py:207: in test_chunk_with_no_good_split_points
    chunks = chunk_text(long_url, chunk_size=3000)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: chunk_text() got an unexpected keyword argument 'chunk_size'
__________ TestSecurityAssumptions.test_path_traversal_in_model_names __________
tests/test_adversarial.py:277: in test_path_traversal_in_model_names
    assert response.status_code in [200, 422]
E   assert 429 in [200, 422]
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
---------------------------- Captured stdout setup -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.146835+00:00[0m [[32m[1minfo     [0m] [1mStarting AI Conflict Dashboard API[0m [[0m[1m[34mmain[0m][0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35mlifespan[0m [36mlineno[0m=[35m41[0m
[2m2025-08-02T17:00:45.146960+00:00[0m [[32m[1minfo     [0m] [1mMemory manager started        [0m [[0m[1m[34mmemory_management[0m][0m [36mfilename[0m=[35mmemory_management.py[0m [36mfunc_name[0m=[35mstart[0m [36mlineno[0m=[35m44[0m
------------------------------ Captured log setup ------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
INFO     main:main.py:41 {'event': 'Starting AI Conflict Dashboard API', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:45.146835+00:00', 'filename': 'main.py', 'func_name': 'lifespan', 'lineno': 41}
INFO     memory_management:memory_management.py:44 {'event': 'Memory manager started', 'level': 'info', 'logger': 'memory_management', 'timestamp': '2025-08-02T17:00:45.146960+00:00', 'filename': 'memory_management.py', 'func_name': 'start', 'lineno': 44}
----------------------------- Captured stdout call -----------------------------
[2m2025-08-02T17:00:45.147588+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.147588+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
--------------------------- Captured stdout teardown ---------------------------
[2m2025-08-02T17:00:45.150968+00:00[0m [[32m[1minfo     [0m] [1mShutting down AI Conflict Dashboard API[0m [[0m[1m[34mmain[0m][0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35mlifespan[0m [36mlineno[0m=[35m45[0m
[2m2025-08-02T17:00:45.151160+00:00[0m [[32m[1minfo     [0m] [1mMemory manager stopped        [0m [[0m[1m[34mmemory_management[0m][0m [36mfilename[0m=[35mmemory_management.py[0m [36mfunc_name[0m=[35mstop[0m [36mlineno[0m=[35m54[0m
---------------------------- Captured log teardown -----------------------------
INFO     main:main.py:45 {'event': 'Shutting down AI Conflict Dashboard API', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:45.150968+00:00', 'filename': 'main.py', 'func_name': 'lifespan', 'lineno': 45}
INFO     memory_management:memory_management.py:54 {'event': 'Memory manager stopped', 'level': 'info', 'logger': 'memory_management', 'timestamp': '2025-08-02T17:00:45.151160+00:00', 'filename': 'memory_management.py', 'func_name': 'stop', 'lineno': 54}
_______________ TestBrowserQuirks.test_different_newline_formats _______________
tests/test_adversarial.py:312: in test_different_newline_formats
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
---------------------------- Captured stdout setup -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.155182+00:00[0m [[32m[1minfo     [0m] [1mStarting AI Conflict Dashboard API[0m [[0m[1m[34mmain[0m][0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35mlifespan[0m [36mlineno[0m=[35m41[0m
[2m2025-08-02T17:00:45.155314+00:00[0m [[32m[1minfo     [0m] [1mMemory manager started        [0m [[0m[1m[34mmemory_management[0m][0m [36mfilename[0m=[35mmemory_management.py[0m [36mfunc_name[0m=[35mstart[0m [36mlineno[0m=[35m44[0m
------------------------------ Captured log setup ------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
INFO     main:main.py:41 {'event': 'Starting AI Conflict Dashboard API', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:45.155182+00:00', 'filename': 'main.py', 'func_name': 'lifespan', 'lineno': 41}
INFO     memory_management:memory_management.py:44 {'event': 'Memory manager started', 'level': 'info', 'logger': 'memory_management', 'timestamp': '2025-08-02T17:00:45.155314+00:00', 'filename': 'memory_management.py', 'func_name': 'start', 'lineno': 44}
----------------------------- Captured stdout call -----------------------------
[2m2025-08-02T17:00:45.155954+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.155954+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
--------------------------- Captured stdout teardown ---------------------------
[2m2025-08-02T17:00:45.159130+00:00[0m [[32m[1minfo     [0m] [1mShutting down AI Conflict Dashboard API[0m [[0m[1m[34mmain[0m][0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35mlifespan[0m [36mlineno[0m=[35m45[0m
[2m2025-08-02T17:00:45.159320+00:00[0m [[32m[1minfo     [0m] [1mMemory manager stopped        [0m [[0m[1m[34mmemory_management[0m][0m [36mfilename[0m=[35mmemory_management.py[0m [36mfunc_name[0m=[35mstop[0m [36mlineno[0m=[35m54[0m
---------------------------- Captured log teardown -----------------------------
INFO     main:main.py:45 {'event': 'Shutting down AI Conflict Dashboard API', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:45.159130+00:00', 'filename': 'main.py', 'func_name': 'lifespan', 'lineno': 45}
INFO     memory_management:memory_management.py:54 {'event': 'Memory manager stopped', 'level': 'info', 'logger': 'memory_management', 'timestamp': '2025-08-02T17:00:45.159320+00:00', 'filename': 'memory_management.py', 'func_name': 'stop', 'lineno': 54}
_______________ TestBrowserQuirks.test_emoji_skin_tone_modifiers _______________
tests/test_adversarial.py:325: in test_emoji_skin_tone_modifiers
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
---------------------------- Captured stdout setup -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.160520+00:00[0m [[32m[1minfo     [0m] [1mStarting AI Conflict Dashboard API[0m [[0m[1m[34mmain[0m][0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35mlifespan[0m [36mlineno[0m=[35m41[0m
[2m2025-08-02T17:00:45.160649+00:00[0m [[32m[1minfo     [0m] [1mMemory manager started        [0m [[0m[1m[34mmemory_management[0m][0m [36mfilename[0m=[35mmemory_management.py[0m [36mfunc_name[0m=[35mstart[0m [36mlineno[0m=[35m44[0m
------------------------------ Captured log setup ------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
INFO     main:main.py:41 {'event': 'Starting AI Conflict Dashboard API', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:45.160520+00:00', 'filename': 'main.py', 'func_name': 'lifespan', 'lineno': 41}
INFO     memory_management:memory_management.py:44 {'event': 'Memory manager started', 'level': 'info', 'logger': 'memory_management', 'timestamp': '2025-08-02T17:00:45.160649+00:00', 'filename': 'memory_management.py', 'func_name': 'start', 'lineno': 44}
----------------------------- Captured stdout call -----------------------------
[2m2025-08-02T17:00:45.161283+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.161283+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
--------------------------- Captured stdout teardown ---------------------------
[2m2025-08-02T17:00:45.164506+00:00[0m [[32m[1minfo     [0m] [1mShutting down AI Conflict Dashboard API[0m [[0m[1m[34mmain[0m][0m [36mfilename[0m=[35mmain.py[0m [36mfunc_name[0m=[35mlifespan[0m [36mlineno[0m=[35m45[0m
[2m2025-08-02T17:00:45.164696+00:00[0m [[32m[1minfo     [0m] [1mMemory manager stopped        [0m [[0m[1m[34mmemory_management[0m][0m [36mfilename[0m=[35mmemory_management.py[0m [36mfunc_name[0m=[35mstop[0m [36mlineno[0m=[35m54[0m
---------------------------- Captured log teardown -----------------------------
INFO     main:main.py:45 {'event': 'Shutting down AI Conflict Dashboard API', 'level': 'info', 'logger': 'main', 'timestamp': '2025-08-02T17:00:45.164506+00:00', 'filename': 'main.py', 'func_name': 'lifespan', 'lineno': 45}
INFO     memory_management:memory_management.py:54 {'event': 'Memory manager stopped', 'level': 'info', 'logger': 'memory_management', 'timestamp': '2025-08-02T17:00:45.164696+00:00', 'filename': 'memory_management.py', 'func_name': 'stop', 'lineno': 54}
________________ TestAnalyzeEndpoint.test_analyze_missing_keys _________________
tests/test_api_analyze.py:44: in test_analyze_missing_keys
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.166115+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.166115+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
________________ TestAnalyzeEndpoint.test_analyze_missing_text _________________
tests/test_api_analyze.py:52: in test_analyze_missing_text
    assert response.status_code == 422
E   assert 429 == 422
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.170675+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.170675+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
______________ TestAnalyzeEndpoint.test_analyze_short_text_openai ______________
tests/test_api_analyze.py:64: in test_analyze_short_text_openai
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.175402+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.175402+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
______________ TestAnalyzeEndpoint.test_analyze_short_text_claude ______________
tests/test_api_analyze.py:91: in test_analyze_short_text_claude
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.180391+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.180391+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
_______________ TestAnalyzeEndpoint.test_analyze_both_providers ________________
tests/test_api_analyze.py:130: in test_analyze_both_providers
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.185090+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.185090+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
_________ TestAnalyzeEndpoint.test_analyze_long_text_triggers_chunking _________
tests/test_api_analyze.py:166: in test_analyze_long_text_triggers_chunking
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.189732+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.189732+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
___________ TestAnalyzeEndpoint.test_analyze_provider_error_handling ___________
tests/test_api_analyze.py:192: in test_analyze_provider_error_handling
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.194408+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.194408+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
________________ TestAnalyzeEndpoint.test_analyze_unicode_text _________________
tests/test_api_analyze.py:211: in test_analyze_unicode_text
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.198946+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.198946+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
_________________ TestAnalyzeEndpoint.test_analyze_empty_text __________________
tests/test_api_analyze.py:222: in test_analyze_empty_text
    assert response.status_code == 400
E   assert 429 == 400
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.203261+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.203261+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
____________ TestAnalyzeEndpoint.test_analyze_whitespace_only_text _____________
tests/test_api_analyze.py:235: in test_analyze_whitespace_only_text
    assert response.status_code == 400
E   assert 429 == 400
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.207735+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.207735+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
___________ TestAnalyzeEndpoint.test_analyze_various_text_sizes[100] ___________
tests/test_api_analyze.py:250: in test_analyze_various_text_sizes
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.212223+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.212223+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
__________ TestAnalyzeEndpoint.test_analyze_various_text_sizes[1000] ___________
tests/test_api_analyze.py:250: in test_analyze_various_text_sizes
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.216735+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.216735+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
__________ TestAnalyzeEndpoint.test_analyze_various_text_sizes[2500] ___________
tests/test_api_analyze.py:250: in test_analyze_various_text_sizes
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.221230+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.221230+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
__________ TestAnalyzeEndpoint.test_analyze_various_text_sizes[5000] ___________
tests/test_api_analyze.py:250: in test_analyze_various_text_sizes
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.225672+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.225672+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
____________ TestAnalyzeEndpoint.test_response_includes_token_info _____________
tests/test_api_analyze.py:276: in test_response_includes_token_info
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.230235+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.230235+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
_______ TestAPIIntegrationScenarios.test_multiple_file_content_analysis ________
tests/test_api_integration.py:56: in test_multiple_file_content_analysis
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.235026+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.235026+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
_______ TestAPIIntegrationScenarios.test_unicode_and_special_characters ________
tests/test_api_integration.py:87: in test_unicode_and_special_characters
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.239518+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.239518+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
_____________ TestAPIIntegrationScenarios.test_concurrent_requests _____________
tests/test_api_integration.py:138: in test_concurrent_requests
    assert all(r["status"] == 200 for r in results)
E   assert False
E    +  where False = all(<generator object TestAPIIntegrationScenarios.test_concurrent_requests.<locals>.<genexpr> at 0x116dfc5f0>)
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[1mUsing selector: KqueueSelector[0m
[1mUsing selector: KqueueSelector[0m
[1mUsing selector: KqueueSelector[0m
[1mUsing selector: KqueueSelector[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.246573+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[2m2025-08-02T17:00:45.246847+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[2m2025-08-02T17:00:45.247231+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[2m2025-08-02T17:00:45.248565+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[1mUsing selector: KqueueSelector[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.250247+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.251330+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[2m2025-08-02T17:00:45.251636+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[2m2025-08-02T17:00:45.252214+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[2m2025-08-02T17:00:45.252641+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[2m2025-08-02T17:00:45.253306+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.246573+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.246847+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.247231+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.248565+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.250247+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.251330+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.251636+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.252214+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.252641+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.253306+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
____________ TestAPIIntegrationScenarios.test_request_id_uniqueness ____________
tests/test_api_integration.py:159: in test_request_id_uniqueness
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.259946+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.259946+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
___________ TestAPIIntegrationScenarios.test_model_fallback_behavior ___________
tests/test_api_integration.py:189: in test_model_fallback_behavior
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.264341+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.264341+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
________ TestAPIIntegrationScenarios.test_mixed_provider_response_times ________
tests/test_api_integration.py:221: in test_mixed_provider_response_times
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.268831+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.268831+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
______ TestAPIIntegrationScenarios.test_empty_provider_response_handling _______
tests/test_api_integration.py:246: in test_empty_provider_response_handling
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.273191+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.273191+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
________________ TestAPIIntegrationScenarios.test_cors_headers _________________
tests/test_api_integration.py:265: in test_cors_headers
    assert "access-control-allow-origin" in response.headers
E   AssertionError: assert 'access-control-allow-origin' in Headers({'retry-after': '55', 'content-length': '32', 'content-type': 'application/json'})
E    +  where Headers({'retry-after': '55', 'content-length': '32', 'content-type': 'application/json'}) = <Response [429 Too Many Requests]>.headers
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.277392+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.277392+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
__________________ TestAPIErrorScenarios.test_malformed_json ___________________
tests/test_api_integration.py:294: in test_malformed_json
    assert response.status_code == 422  # Unprocessable Entity
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   assert 429 == 422
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.281710+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.281710+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
_______________ TestAPIErrorScenarios.test_missing_content_type ________________
tests/test_api_integration.py:305: in test_missing_content_type
    assert response.status_code in [200, 422]
E   assert 429 in [200, 422]
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.286083+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.286083+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
________________ TestAPIErrorScenarios.test_very_large_payload _________________
tests/test_api_integration.py:318: in test_very_large_payload
    assert response.status_code in [200, 413]  # 413 = Payload Too Large
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   assert 429 in [200, 413]
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.309188+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.309188+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
_____________ TestAPIErrorScenarios.test_rate_limiting_simulation ______________
tests/test_api_integration.py:338: in test_rate_limiting_simulation
    assert all(status == 200 for status in responses)
E   assert False
E    +  where False = all(<generator object TestAPIErrorScenarios.test_rate_limiting_simulation.<locals>.<genexpr> at 0x11797b780>)
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.314161+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.315202+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.316200+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.317229+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.318259+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.319274+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.320287+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.321308+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.322318+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.323347+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.324352+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.325366+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.326400+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.327405+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.328411+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.329403+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.330415+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.331443+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.332458+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.333449+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.334450+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.335443+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.336415+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.337380+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.338384+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.339367+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.340344+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.341327+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.342312+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.343287+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.344306+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.345458+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.346433+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.347417+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.348399+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.349378+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.350373+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.351354+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.352364+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.353348+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.354345+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.355331+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.356311+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.357292+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.358284+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.359254+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.360237+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.361214+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.362175+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.363137+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.364114+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.365092+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.366053+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.367035+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.368011+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.368993+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.369968+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.370979+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.371975+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.372955+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.373940+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.374914+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.375906+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.376899+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.377883+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.378883+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.380084+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.381107+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.382112+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.383100+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.384083+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.385080+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.386086+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.387060+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.388059+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.389034+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.390022+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.391004+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.391995+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.392988+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.393964+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.394970+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.395953+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.396941+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.397917+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.398898+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.399892+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.400871+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.401853+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.402852+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.403831+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.404834+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.405854+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.406839+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.407832+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.408821+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.409813+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.410802+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.411788+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.412760+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.314161+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.315202+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.316200+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.317229+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.318259+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.319274+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.320287+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.321308+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.322318+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.323347+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.324352+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.325366+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.326400+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.327405+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.328411+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.329403+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.330415+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.331443+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.332458+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.333449+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.334450+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.335443+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.336415+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.337380+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.338384+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.339367+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.340344+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.341327+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.342312+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.343287+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.344306+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.345458+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.346433+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.347417+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.348399+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.349378+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.350373+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.351354+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.352364+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.353348+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.354345+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.355331+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.356311+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.357292+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.358284+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.359254+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.360237+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.361214+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.362175+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.363137+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.364114+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.365092+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.366053+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.367035+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.368011+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.368993+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.369968+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.370979+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.371975+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.372955+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.373940+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.374914+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.375906+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.376899+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.377883+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.378883+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.380084+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.381107+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.382112+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.383100+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.384083+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.385080+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.386086+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.387060+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.388059+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.389034+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.390022+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.391004+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.391995+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.392988+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.393964+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.394970+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.395953+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.396941+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.397917+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.398898+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.399892+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.400871+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.401853+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.402852+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.403831+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.404834+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.405854+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.406839+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.407832+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.408821+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.409813+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.410802+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.411788+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.412760+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
_________________ TestAPIErrorScenarios.test_timeout_handling __________________
tests/test_api_integration.py:356: in test_timeout_handling
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.417862+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.417862+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
____ TestFullWorkflowIntegration.test_full_analysis_workflow_all_providers _____
tests/test_integration.py:78: in test_full_analysis_workflow_all_providers
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.422779+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.422779+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
__________ TestFullWorkflowIntegration.test_partial_provider_workflow __________
tests/test_integration.py:113: in test_partial_provider_workflow
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.428091+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.428091+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
___________ TestFullWorkflowIntegration.test_error_handling_workflow ___________
tests/test_integration.py:147: in test_error_handling_workflow
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.433256+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.433256+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
________ TestFullWorkflowIntegration.test_large_text_chunking_workflow _________
tests/test_integration.py:181: in test_large_text_chunking_workflow
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.438631+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.438631+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
_________ TestFullWorkflowIntegration.test_model_selection_persistence _________
tests/test_integration.py:237: in test_model_selection_persistence
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.547414+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.547414+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
___ TestCircuitBreakerIntegration.test_circuit_breaker_opens_after_failures ____
tests/test_integration.py:273: in test_circuit_breaker_opens_after_failures
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.555468+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.555468+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
_________ TestCircuitBreakerIntegration.test_circuit_breaker_recovery __________
tests/test_integration.py:285: in test_circuit_breaker_recovery
    with patch("llm_providers.openai_breaker") as mock_breaker:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'llm_providers' from '/Users/ahmed/src/ai-conflict-dashboard/backend/llm_providers.py'> does not have the attribute 'openai_breaker'
______________ TestLoggingIntegration.test_request_correlation_id ______________
tests/test_integration.py:337: in test_request_correlation_id
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.617337+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.617337+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
--------------------------- Captured stdout teardown ---------------------------
[1mclose.started                 [0m
[1mclose.complete                [0m
[1mclose.started                 [0m
[1mclose.complete                [0m
[1mclose.started                 [0m
[1mclose.complete                [0m
[1mclose.started                 [0m
[1mclose.complete                [0m
[1mclose.started                 [0m
[1mclose.complete                [0m
[1mclose.started                 [0m
[1mclose.complete                [0m
[1mclose.started                 [0m
[1mclose.complete                [0m
[1mclose.started                 [0m
[1mclose.complete                [0m
[1mclose.started                 [0m
[1mclose.complete                [0m
____________ TestLoggingIntegration.test_error_logging_integration _____________
tests/test_integration.py:359: in test_error_logging_integration
    assert response.status_code == 422
E   assert 429 == 422
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:45.645267+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:45.645267+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
______ TestHealthCheckIntegration.test_health_check_with_degraded_service ______
tests/test_integration.py:382: in test_health_check_with_degraded_service
    with patch("llm_providers.openai_breaker") as mock_breaker:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'llm_providers' from '/Users/ahmed/src/ai-conflict-dashboard/backend/llm_providers.py'> does not have the attribute 'openai_breaker'
_______________ TestCircuitBreakerCallbacks.test_on_circuit_open _______________
tests/test_llm_providers.py:27: in test_on_circuit_open
    with patch("llm_providers.log_circuit_breaker_event") as mock_log:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'llm_providers' from '/Users/ahmed/src/ai-conflict-dashboard/backend/llm_providers.py'> does not have the attribute 'log_circuit_breaker_event'
______________ TestCircuitBreakerCallbacks.test_on_circuit_close _______________
tests/test_llm_providers.py:36: in test_on_circuit_close
    with patch("llm_providers.log_circuit_breaker_event") as mock_log:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'llm_providers' from '/Users/ahmed/src/ai-conflict-dashboard/backend/llm_providers.py'> does not have the attribute 'log_circuit_breaker_event'
________________ TestOpenAIIntegration.test_call_openai_success ________________
tests/test_llm_providers.py:67: in test_call_openai_success
    assert result["response"] == "Test response from OpenAI"
E   AssertionError: assert '' == 'Test response from OpenAI'
E     
E     - Test response from OpenAI
----------------------------- Captured stdout call -----------------------------
[2m2025-08-02T17:00:45.789223+00:00[0m [[33m[1mwarning  [0m] [1mOpenAI circuit breaker is open for key test-key...[0m [[0m[1m[34mllm_providers[0m][0m [36mfilename[0m=[35mllm_providers.py[0m [36mfunc_name[0m=[35mcall_openai[0m [36mlineno[0m=[35m118[0m
------------------------------ Captured log call -------------------------------
WARNING  llm_providers:llm_providers.py:118 {'event': 'OpenAI circuit breaker is open for key test-key...', 'level': 'warning', 'logger': 'llm_providers', 'timestamp': '2025-08-02T17:00:45.789223+00:00', 'filename': 'llm_providers.py', 'func_name': 'call_openai', 'lineno': 118}
_______________ TestOpenAIIntegration.test_call_openai_api_error _______________
tests/test_llm_providers.py:81: in test_call_openai_api_error
    assert "API error: 500" in result["error"]
E   AssertionError: assert 'API error: 500' in 'Service temporarily unavailable (circuit breaker open)'
----------------------------- Captured stdout call -----------------------------
[2m2025-08-02T17:00:45.794184+00:00[0m [[33m[1mwarning  [0m] [1mOpenAI circuit breaker is open for key test-key...[0m [[0m[1m[34mllm_providers[0m][0m [36mfilename[0m=[35mllm_providers.py[0m [36mfunc_name[0m=[35mcall_openai[0m [36mlineno[0m=[35m118[0m
------------------------------ Captured log call -------------------------------
WARNING  llm_providers:llm_providers.py:118 {'event': 'OpenAI circuit breaker is open for key test-key...', 'level': 'warning', 'logger': 'llm_providers', 'timestamp': '2025-08-02T17:00:45.794184+00:00', 'filename': 'llm_providers.py', 'func_name': 'call_openai', 'lineno': 118}
________________ TestOpenAIIntegration.test_call_openai_timeout ________________
tests/test_llm_providers.py:93: in test_call_openai_timeout
    assert result["error"] == "Request timeout (30s)"
E   AssertionError: assert 'Service temp...breaker open)' == 'Request timeout (30s)'
E     
E     - Request timeout (30s)
E     + Service temporarily unavailable (circuit breaker open)
----------------------------- Captured stdout call -----------------------------
[2m2025-08-02T17:00:45.798989+00:00[0m [[33m[1mwarning  [0m] [1mOpenAI circuit breaker is open for key test-key...[0m [[0m[1m[34mllm_providers[0m][0m [36mfilename[0m=[35mllm_providers.py[0m [36mfunc_name[0m=[35mcall_openai[0m [36mlineno[0m=[35m118[0m
------------------------------ Captured log call -------------------------------
WARNING  llm_providers:llm_providers.py:118 {'event': 'OpenAI circuit breaker is open for key test-key...', 'level': 'warning', 'logger': 'llm_providers', 'timestamp': '2025-08-02T17:00:45.798989+00:00', 'filename': 'llm_providers.py', 'func_name': 'call_openai', 'lineno': 118}
_____________ TestOpenAIIntegration.test_call_openai_circuit_open ______________
tests/test_llm_providers.py:103: in test_call_openai_circuit_open
    with patch("llm_providers.openai_breaker") as mock_breaker:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'llm_providers' from '/Users/ahmed/src/ai-conflict-dashboard/backend/llm_providers.py'> does not have the attribute 'openai_breaker'
_____________ TestClaudeIntegration.test_call_claude_circuit_open ______________
tests/test_llm_providers.py:174: in test_call_claude_circuit_open
    with patch("llm_providers.claude_breaker") as mock_breaker:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'llm_providers' from '/Users/ahmed/src/ai-conflict-dashboard/backend/llm_providers.py'> does not have the attribute 'claude_breaker'
_____________ TestGeminiIntegration.test_call_gemini_circuit_open ______________
tests/test_llm_providers.py:243: in test_call_gemini_circuit_open
    with patch("llm_providers.gemini_breaker") as mock_breaker:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'llm_providers' from '/Users/ahmed/src/ai-conflict-dashboard/backend/llm_providers.py'> does not have the attribute 'gemini_breaker'
_______________ TestGrokIntegration.test_call_grok_circuit_open ________________
tests/test_llm_providers.py:312: in test_call_grok_circuit_open
    with patch("llm_providers.grok_breaker") as mock_breaker:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'llm_providers' from '/Users/ahmed/src/ai-conflict-dashboard/backend/llm_providers.py'> does not have the attribute 'grok_breaker'
____________ TestAnalyzeWithModels.test_analyze_with_custom_models _____________
tests/test_llm_providers.py:415: in test_analyze_with_custom_models
    mock_openai.assert_called_once_with("Test text", "openai-key", "gpt-4")
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:991: in assert_called_once_with
    return self.assert_called_with(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:979: in assert_called_with
    raise AssertionError(_error_message()) from cause
E   AssertionError: expected call not found.
E   Expected: call_openai('Test text', 'openai-key', 'gpt-4')
E     Actual: call_openai('Test text', 'openai-key', 'claude-3-opus-20240229')
----------------------------- Captured stdout call -----------------------------
[2m2025-08-02T17:00:45.997439+00:00[0m [[32m[1minfo     [0m] [1mCalling Ollama with model gpt-4[0m [[0m[1m[34mllm_providers[0m][0m [36mfilename[0m=[35mllm_providers.py[0m [36mfunc_name[0m=[35mcall_ollama_fixed[0m [36mlineno[0m=[35m493[0m
[2m2025-08-02T17:00:45.997609+00:00[0m [[32m[1minfo     [0m] [1mInitialized Ollama provider   [0m [[0m[1m[34mplugins.ollama_provider[0m][0m [36mbase_url[0m=[35mhttp://localhost:11434[0m [36mfilename[0m=[35mollama_provider.py[0m [36mfunc_name[0m=[35m__init__[0m [36mlineno[0m=[35m92[0m
[2m2025-08-02T17:00:46.003890+00:00[0m [[32m[1minfo     [0m] [1mOllama health check passed    [0m [[0m[1m[34mplugins.ollama_provider[0m][0m [36mavailable_models[0m=[35m10[0m [36mfilename[0m=[35mollama_provider.py[0m [36mfunc_name[0m=[35mcheck_health[0m [36mlineno[0m=[35m118[0m [36mmodels[0m=[35m['gemma3:4b', 'r1-1776:latest', 'dolphin-mixtral:8x22b', 'deepseek-r1:70b', 'llama3.3:70b'][0m
[2m2025-08-02T17:00:46.004258+00:00[0m [[33m[1mwarning  [0m] [1mOllama error: Model 'gpt-4' not found. Available models: gemma3:4b, r1-1776:latest, dolphin-mixtral:8x22b, deepseek-r1:70b, llama3.3:70b[0m [[0m[1m[34mllm_providers[0m][0m [36mfilename[0m=[35mllm_providers.py[0m [36mfunc_name[0m=[35mcall_ollama_fixed[0m [36mlineno[0m=[35m501[0m
------------------------------ Captured log call -------------------------------
INFO     llm_providers:llm_providers.py:493 {'event': 'Calling Ollama with model gpt-4', 'level': 'info', 'logger': 'llm_providers', 'timestamp': '2025-08-02T17:00:45.997439+00:00', 'filename': 'llm_providers.py', 'func_name': 'call_ollama_fixed', 'lineno': 493}
INFO     plugins.ollama_provider:ollama_provider.py:92 {'base_url': 'http://localhost:11434', 'event': 'Initialized Ollama provider', 'level': 'info', 'logger': 'plugins.ollama_provider', 'timestamp': '2025-08-02T17:00:45.997609+00:00', 'filename': 'ollama_provider.py', 'func_name': '__init__', 'lineno': 92}
INFO     plugins.ollama_provider:ollama_provider.py:118 {'available_models': 10, 'models': ['gemma3:4b', 'r1-1776:latest', 'dolphin-mixtral:8x22b', 'deepseek-r1:70b', 'llama3.3:70b'], 'event': 'Ollama health check passed', 'level': 'info', 'logger': 'plugins.ollama_provider', 'timestamp': '2025-08-02T17:00:46.003890+00:00', 'filename': 'ollama_provider.py', 'func_name': 'check_health', 'lineno': 118}
WARNING  llm_providers:llm_providers.py:501 {'event': "Ollama error: Model 'gpt-4' not found. Available models: gemma3:4b, r1-1776:latest, dolphin-mixtral:8x22b, deepseek-r1:70b, llama3.3:70b", 'level': 'warning', 'logger': 'llm_providers', 'timestamp': '2025-08-02T17:00:46.004258+00:00', 'filename': 'llm_providers.py', 'func_name': 'call_ollama_fixed', 'lineno': 501}
________________________ TestMainApp.test_root_endpoint ________________________
tests/test_main.py:17: in test_root_endpoint
    assert response.status_code == 200
E   assert 429 == 200
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:46.052980+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:46.052980+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
___________________ TestMainApp.test_analyze_with_debug_mode ___________________
tests/test_main.py:39: in test_analyze_with_debug_mode
    assert response.status_code == 500
E   assert 429 == 500
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:46.058038+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:46.058038+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
________________ TestMainApp.test_analyze_with_production_mode _________________
tests/test_main.py:52: in test_analyze_with_production_mode
    assert response.status_code == 500
E   assert 429 == 500
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:46.060615+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:46.060615+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
___________ TestActualBugs.test_chunk_text_with_code_block_boundary ____________
tests/test_real_bugs.py:18: in test_chunk_text_with_code_block_boundary
    chunks = chunk_text(text, chunk_size=4000)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: chunk_text() got an unexpected keyword argument 'chunk_size'
____________ TestSecurityVulnerabilities.test_sql_injection_in_text ____________
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1423: in patched
    with self.decoration_helper(patched,
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:141: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1405: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:530: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1481: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pkgutil.py:513: in resolve_name
    mod = importlib.import_module(modname)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   ModuleNotFoundError: No module named 'llm_providers_fixed'
______________ TestSecurityVulnerabilities.test_xxe_xml_injection ______________
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1423: in patched
    with self.decoration_helper(patched,
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:141: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1405: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:530: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1481: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pkgutil.py:513: in resolve_name
    mod = importlib.import_module(modname)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   ModuleNotFoundError: No module named 'llm_providers_fixed'
______________ TestSecurityVulnerabilities.test_command_injection ______________
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1423: in patched
    with self.decoration_helper(patched,
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:141: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1405: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:530: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1481: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pkgutil.py:513: in resolve_name
    mod = importlib.import_module(modname)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   ModuleNotFoundError: No module named 'llm_providers_fixed'
_______________ TestSecurityVulnerabilities.test_path_traversal ________________
tests/test_security_comprehensive.py:146: in test_path_traversal
    assert response.status_code in [200, 422]
E   assert 429 in [200, 422]
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:46.294498+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:46.294498+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
_________ TestSecurityVulnerabilities.test_api_key_extraction_attempts _________
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1423: in patched
    with self.decoration_helper(patched,
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:141: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1405: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:530: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1481: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pkgutil.py:513: in resolve_name
    mod = importlib.import_module(modname)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   ModuleNotFoundError: No module named 'llm_providers_fixed'
_________ TestMemoryAndPerformance.test_large_response_memory_cleanup __________
tests/test_security_comprehensive.py:434: in test_large_response_memory_cleanup
    with patch("llm_providers_fixed._call_openai_with_breaker", new_callable=AsyncMock) as mock:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1481: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pkgutil.py:513: in resolve_name
    mod = importlib.import_module(modname)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap>:1387: in _gcd_import
    ???
<frozen importlib._bootstrap>:1360: in _find_and_load
    ???
<frozen importlib._bootstrap>:1324: in _find_and_load_unlocked
    ???
E   ModuleNotFoundError: No module named 'llm_providers_fixed'
______________ TestMemoryAndPerformance.test_regex_dos_prevention ______________
tests/test_security_comprehensive.py:483: in test_regex_dos_prevention
    assert response.status_code in [200, 422]
E   assert 429 in [200, 422]
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:46.455296+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:46.455296+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
________________ TestDataValidation.test_model_name_validation _________________
tests/test_security_comprehensive.py:512: in test_model_name_validation
    assert response.status_code in [200, 422]
E   assert 429 in [200, 422]
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:46.460951+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:46.460951+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
______________ TestDataValidation.test_api_key_format_validation _______________
tests/test_security_comprehensive.py:530: in test_api_key_format_validation
    assert response.status_code in [200, 422]
E   assert 429 in [200, 422]
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:46.466375+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:46.466375+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
___________________ TestDataValidation.test_text_size_limits ___________________
tests/test_security_comprehensive.py:549: in test_text_size_limits
    assert response.status_code in [200, 413, 422]
E   assert 429 in [200, 413, 422]
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
----------------------------- Captured stdout call -----------------------------
[1mUsing selector: KqueueSelector[0m
[2m2025-08-02T17:00:46.473585+00:00[0m [[33m[1mwarning  [0m] [1mRate limit exceeded (minute)  [0m [[0m[1m[34mrate_limiting[0m][0m [36mcount[0m=[35m60[0m [36mfilename[0m=[35mrate_limiting.py[0m [36mfunc_name[0m=[35mcheck_rate_limit[0m [36midentifier[0m=[35mtestclient_846488f1[0m [36mlimit[0m=[35m60[0m [36mlineno[0m=[35m114[0m
------------------------------ Captured log call -------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: KqueueSelector
WARNING  rate_limiting:rate_limiting.py:114 {'identifier': 'testclient_846488f1', 'count': 60, 'limit': 60, 'event': 'Rate limit exceeded (minute)', 'level': 'warning', 'logger': 'rate_limiting', 'timestamp': '2025-08-02T17:00:46.473585+00:00', 'filename': 'rate_limiting.py', 'func_name': 'check_rate_limit', 'lineno': 114}
___________________ TestEdgeCases.test_very_long_single_word ___________________
tests/test_token_utils.py:146: in test_very_long_single_word
    assert len(chunks) > 1
E   AssertionError: assert 1 > 1
E    +  where 1 = len([{'chunk_index': 1, 'end_char': 10000, 'is_complete': True, 'overlap_with_next': 0, ...}])
----------------------------- Captured stdout call -----------------------------
[2m2025-08-02T17:00:46.494154+00:00[0m [[32m[1minfo     [0m] [1mText chunked                  [0m [[0m[1m[34msmart_chunking[0m][0m [36mchunk_sizes[0m=[35m[10000][0m [36mfilename[0m=[35msmart_chunking.py[0m [36mfunc_name[0m=[35mchunk_text[0m [36mlineno[0m=[35m184[0m [36mnum_chunks[0m=[35m1[0m [36moriginal_length[0m=[35m10000[0m
------------------------------ Captured log call -------------------------------
INFO     smart_chunking:smart_chunking.py:184 {'original_length': 10000, 'num_chunks': 1, 'chunk_sizes': [10000], 'event': 'Text chunked', 'level': 'info', 'logger': 'smart_chunking', 'timestamp': '2025-08-02T17:00:46.494154+00:00', 'filename': 'smart_chunking.py', 'func_name': 'chunk_text', 'lineno': 184}
=============================== warnings summary ===============================
tests/test_adversarial.py::TestAdversarialInputs::test_deeply_nested_markdown
tests/test_security_comprehensive.py::TestCircuitBreakerPerKey::test_circuit_breakers_are_per_key
  /Users/ahmed/src/ai-conflict-dashboard/venv/lib/python3.13/site-packages/pybreaker/__init__.py:257: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    self._state_storage.opened_at = datetime.utcnow()

tests/test_adversarial.py::TestRaceConditions::test_same_request_multiple_times
  /Users/ahmed/src/ai-conflict-dashboard/venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py:867: DeprecationWarning: The event_loop fixture provided by pytest-asyncio has been redefined in
  /Users/ahmed/src/ai-conflict-dashboard/backend/tests/conftest.py:100
  Replacing the event_loop fixture with a custom implementation is deprecated
  and will lead to errors in the future.
  If you want to request an asyncio event loop with a scope other than function
  scope, use the "loop_scope" argument to the asyncio mark when marking the tests.
  If you want to return different types of event loops, use the event_loop_policy
  fixture.
  
    warnings.warn(

tests/test_api_integration.py::TestAPIErrorScenarios::test_malformed_json
tests/test_api_integration.py::TestAPIErrorScenarios::test_missing_content_type
  /Users/ahmed/src/ai-conflict-dashboard/venv/lib/python3.13/site-packages/httpx/_models.py:408: DeprecationWarning: Use 'content=<...>' to upload raw bytes/text content.
    headers, stream = encode_request(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html

---------- coverage: platform darwin, python 3.13.5-final-0 ----------
Name                                   Stmts   Miss  Cover   Missing
--------------------------------------------------------------------
cors_config.py                            16      2    88%   45, 64
llm_providers.py                         178     40    78%   70-72, 82-84, 127, 129-130, 163, 183, 210-211, 237-257, 268, 302-303, 325-326, 363-364, 390-403, 434-435, 461-474, 507-509
main.py                                  178     59    67%   176, 196, 206, 220-260, 282, 325, 406-437, 447-472, 488-515
memory_management.py                     136     68    50%   52-53, 61, 64-65, 72-102, 106-111, 122-123, 173-177, 191-211, 223-230, 242, 252-270, 275-301
plugins/ollama_provider.py               129     70    46%   131-146, 158-189, 200-218, 246, 258, 305-339, 369-385, 419
rate_limiting.py                          96     28    71%   123-130, 133-140, 205-238, 255-277
smart_chunking.py                        138     28    80%   101, 105, 114, 197-201, 229-248, 252, 292-322
structured_logging.py                     77      6    92%   65, 248-262
test_ollama_integration.py                40      8    80%   24-27, 43-45, 75-77
tests/__init__.py                          0      0   100%
tests/conftest.py                         42      6    86%   42-43, 54, 70, 81, 92
tests/test_adversarial.py                117      1    99%   210
tests/test_api_analyze.py                134     61    54%   45-47, 65-77, 92-104, 131-147, 167-176, 193-197, 212-214, 223, 236, 251-261, 277-283
tests/test_api_integration.py            128     28    78%   57-61, 88-89, 121-122, 160-166, 196, 199-200, 222-228, 247-251, 266-275, 346-347, 357-361
tests/test_integration.py                165     65    61%   79-98, 114-125, 148-166, 182-187, 241-251, 276-281, 287-316, 338-345, 362, 383-388
tests/test_llm_providers.py              244     18    93%   28-29, 37-38, 68, 104-106, 175-177, 244-246, 313-315, 416
tests/test_main.py                        27      3    89%   18, 40, 53
tests/test_real_bugs.py                   36      4    89%   21-26
tests/test_security_comprehensive.py     220     49    78%   31-61, 67-90, 96-123, 152-176, 435-459, 554
tests/test_structured_logging.py          42      0   100%
tests/test_token_utils.py                 88      0   100%
timeout_handler.py                       141     95    33%   59, 71-102, 113-116, 157-175, 206-298, 330, 353-370, 379-426
token_utils.py                            98     15    85%   111-112, 159, 163, 167, 191, 203-205, 280-297
token_utils_wrapper.py                    11      0   100%
workflow_executor.py                     143    143     0%   6-279
--------------------------------------------------------------------
TOTAL                                   2624    797    70%

=========================== short test summary info ============================
FAILED tests/test_adversarial.py::TestRaceConditions::test_rapidly_changing_api_keys
FAILED tests/test_adversarial.py::TestResourceExhaustion::test_infinite_recursion_in_text
FAILED tests/test_adversarial.py::TestChunkingEdgeCases::test_chunk_boundary_code_blocks
FAILED tests/test_adversarial.py::TestChunkingEdgeCases::test_chunk_with_no_good_split_points
FAILED tests/test_adversarial.py::TestSecurityAssumptions::test_path_traversal_in_model_names
FAILED tests/test_adversarial.py::TestBrowserQuirks::test_different_newline_formats
FAILED tests/test_adversarial.py::TestBrowserQuirks::test_emoji_skin_tone_modifiers
FAILED tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_missing_keys
FAILED tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_missing_text
FAILED tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_short_text_openai
FAILED tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_short_text_claude
FAILED tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_both_providers
FAILED tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_long_text_triggers_chunking
FAILED tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_provider_error_handling
FAILED tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_unicode_text
FAILED tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_empty_text
FAILED tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_whitespace_only_text
FAILED tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_various_text_sizes[100]
FAILED tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_various_text_sizes[1000]
FAILED tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_various_text_sizes[2500]
FAILED tests/test_api_analyze.py::TestAnalyzeEndpoint::test_analyze_various_text_sizes[5000]
FAILED tests/test_api_analyze.py::TestAnalyzeEndpoint::test_response_includes_token_info
FAILED tests/test_api_integration.py::TestAPIIntegrationScenarios::test_multiple_file_content_analysis
FAILED tests/test_api_integration.py::TestAPIIntegrationScenarios::test_unicode_and_special_characters
FAILED tests/test_api_integration.py::TestAPIIntegrationScenarios::test_concurrent_requests
FAILED tests/test_api_integration.py::TestAPIIntegrationScenarios::test_request_id_uniqueness
FAILED tests/test_api_integration.py::TestAPIIntegrationScenarios::test_model_fallback_behavior
FAILED tests/test_api_integration.py::TestAPIIntegrationScenarios::test_mixed_provider_response_times
FAILED tests/test_api_integration.py::TestAPIIntegrationScenarios::test_empty_provider_response_handling
FAILED tests/test_api_integration.py::TestAPIIntegrationScenarios::test_cors_headers
FAILED tests/test_api_integration.py::TestAPIErrorScenarios::test_malformed_json
FAILED tests/test_api_integration.py::TestAPIErrorScenarios::test_missing_content_type
FAILED tests/test_api_integration.py::TestAPIErrorScenarios::test_very_large_payload
FAILED tests/test_api_integration.py::TestAPIErrorScenarios::test_rate_limiting_simulation
FAILED tests/test_api_integration.py::TestAPIErrorScenarios::test_timeout_handling
FAILED tests/test_integration.py::TestFullWorkflowIntegration::test_full_analysis_workflow_all_providers
FAILED tests/test_integration.py::TestFullWorkflowIntegration::test_partial_provider_workflow
FAILED tests/test_integration.py::TestFullWorkflowIntegration::test_error_handling_workflow
FAILED tests/test_integration.py::TestFullWorkflowIntegration::test_large_text_chunking_workflow
FAILED tests/test_integration.py::TestFullWorkflowIntegration::test_model_selection_persistence
FAILED tests/test_integration.py::TestCircuitBreakerIntegration::test_circuit_breaker_opens_after_failures
FAILED tests/test_integration.py::TestCircuitBreakerIntegration::test_circuit_breaker_recovery
FAILED tests/test_integration.py::TestLoggingIntegration::test_request_correlation_id
FAILED tests/test_integration.py::TestLoggingIntegration::test_error_logging_integration
FAILED tests/test_integration.py::TestHealthCheckIntegration::test_health_check_with_degraded_service
FAILED tests/test_llm_providers.py::TestCircuitBreakerCallbacks::test_on_circuit_open
FAILED tests/test_llm_providers.py::TestCircuitBreakerCallbacks::test_on_circuit_close
FAILED tests/test_llm_providers.py::TestOpenAIIntegration::test_call_openai_success
FAILED tests/test_llm_providers.py::TestOpenAIIntegration::test_call_openai_api_error
FAILED tests/test_llm_providers.py::TestOpenAIIntegration::test_call_openai_timeout
FAILED tests/test_llm_providers.py::TestOpenAIIntegration::test_call_openai_circuit_open
FAILED tests/test_llm_providers.py::TestClaudeIntegration::test_call_claude_circuit_open
FAILED tests/test_llm_providers.py::TestGeminiIntegration::test_call_gemini_circuit_open
FAILED tests/test_llm_providers.py::TestGrokIntegration::test_call_grok_circuit_open
FAILED tests/test_llm_providers.py::TestAnalyzeWithModels::test_analyze_with_custom_models
FAILED tests/test_main.py::TestMainApp::test_root_endpoint - assert 429 == 200
FAILED tests/test_main.py::TestMainApp::test_analyze_with_debug_mode - assert...
FAILED tests/test_main.py::TestMainApp::test_analyze_with_production_mode - a...
FAILED tests/test_real_bugs.py::TestActualBugs::test_chunk_text_with_code_block_boundary
FAILED tests/test_security_comprehensive.py::TestSecurityVulnerabilities::test_sql_injection_in_text
FAILED tests/test_security_comprehensive.py::TestSecurityVulnerabilities::test_xxe_xml_injection
FAILED tests/test_security_comprehensive.py::TestSecurityVulnerabilities::test_command_injection
FAILED tests/test_security_comprehensive.py::TestSecurityVulnerabilities::test_path_traversal
FAILED tests/test_security_comprehensive.py::TestSecurityVulnerabilities::test_api_key_extraction_attempts
FAILED tests/test_security_comprehensive.py::TestMemoryAndPerformance::test_large_response_memory_cleanup
FAILED tests/test_security_comprehensive.py::TestMemoryAndPerformance::test_regex_dos_prevention
FAILED tests/test_security_comprehensive.py::TestDataValidation::test_model_name_validation
FAILED tests/test_security_comprehensive.py::TestDataValidation::test_api_key_format_validation
FAILED tests/test_security_comprehensive.py::TestDataValidation::test_text_size_limits
FAILED tests/test_token_utils.py::TestEdgeCases::test_very_long_single_word
================== 70 failed, 86 passed, 5 warnings in 8.69s ===================
